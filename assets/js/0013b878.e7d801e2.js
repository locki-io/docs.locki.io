"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[6024],{4863(e,i,n){n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});var t=n(8287),s=n(4848),r=n(8453);const o={slug:"first-submission-mockup-system",title:"First Submission: Building a Charter Validation Testing Framework",authors:["jnxmas"],tags:["encode","ai-ml","civictech","observability"]},l="Submission 1: Mockup System for Forseti 461 Validation",a={authorsImageUrls:[void 0]},c=[{value:"The Challenge",id:"the-challenge",level:2},{value:"Our Solution: Mutation Testing",id:"our-solution-mutation-testing",level:2},{value:"Demo Video",id:"demo-video",level:2},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"1. Framaforms-Compatible Format",id:"1-framaforms-compatible-format",level:3},{value:"2. Levenshtein Mutations",id:"2-levenshtein-mutations",level:3},{value:"3. Redis Storage",id:"3-redis-storage",level:3},{value:"4. Opik Dataset Export",id:"4-opik-dataset-export",level:3},{value:"Key Metrics",id:"key-metrics",level:2},{value:"What&#39;s Next",id:"whats-next",level:2},{value:"Try It Yourself",id:"try-it-yourself",level:2}];function d(e){const i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Goal:"})," Create a systematic approach to test and improve our AI-powered charter validation system."]}),"\n",(0,s.jsxs)(i.p,{children:["For the Encode Hackathon first submission, we focused on building the infrastructure to ensure ",(0,s.jsx)(i.strong,{children:"Forseti 461"})," (our charter validation agent) catches all violations reliably. The key insight: ",(0,s.jsx)(i.em,{children:"you can't improve what you can't measure"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"the-challenge",children:"The Challenge"}),"\n",(0,s.jsxs)(i.p,{children:["Audierne2026 receives citizen contributions through Framaforms. Each contribution must be validated against our ",(0,s.jsx)(i.strong,{children:"Contribution Charter"})," before reaching the platform. The charter prohibits:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Personal attacks or discriminatory remarks"}),"\n",(0,s.jsx)(i.li,{children:"Spam or advertising"}),"\n",(0,s.jsx)(i.li,{children:"Off-topic content (unrelated to Audierne-Esquibien)"}),"\n",(0,s.jsx)(i.li,{children:"False information"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"The problem"}),": How do we know if our LLM-based validation is catching subtle violations? A missed personal attack reaching the platform could poison civic discourse."]}),"\n",(0,s.jsx)(i.h2,{id:"our-solution-mutation-testing",children:"Our Solution: Mutation Testing"}),"\n",(0,s.jsxs)(i.p,{children:["We built a ",(0,s.jsx)(i.strong,{children:"mockup system"})," that generates controlled variations of contributions using ",(0,s.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Levenshtein_distance",children:"Levenshtein distance"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"Valid Contribution \u2500\u2500\u252c\u2500\u2500 95% similar \u2192 Should remain valid\n                     \u251c\u2500\u2500 80% similar \u2192 Borderline case\n                     \u251c\u2500\u2500 60% similar \u2192 Likely invalid\n                     \u2514\u2500\u2500 + Violation injected \u2192 Must be rejected\n"})}),"\n",(0,s.jsx)(i.p,{children:"This allows us to:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Test edge cases systematically"}),"\n",(0,s.jsx)(i.li,{children:"Identify where the prompt fails"}),"\n",(0,s.jsx)(i.li,{children:"Build training datasets for optimization"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"demo-video",children:"Demo Video"}),"\n",(0,s.jsx)("video",{width:"100%",controls:!0,children:(0,s.jsx)("source",{src:"ocapistaine-videos",type:"video/mp4"})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.a,{href:"https://www.youtube.com/watch?v=VBTXNru83Vg",children:"Watch the demo on YouTube \u2192"})})}),"\n",(0,s.jsx)(i.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,s.jsx)(i.h3,{id:"1-framaforms-compatible-format",children:"1. Framaforms-Compatible Format"}),"\n",(0,s.jsx)(i.p,{children:"All mock contributions follow the actual submission format:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "category": "economie",\n  "constat_factuel": "Le parking du port est souvent plein en \xe9t\xe9...",\n  "idees_ameliorations": "Cr\xe9er un parking relais \xe0 l\'entr\xe9e de la ville...",\n  "expected_valid": true\n}\n'})}),"\n",(0,s.jsx)(i.h3,{id:"2-levenshtein-mutations",children:"2. Levenshtein Mutations"}),"\n",(0,s.jsx)(i.p,{children:"We progressively mutate valid contributions and inject violations:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:'from app.mockup import generate_variations\n\nvariations = generate_variations(\n    constat_factuel="Le port est magnifique mais satur\xe9",\n    idees_ameliorations="Proposer des navettes gratuites",\n    category="economie",\n    num_variations=5,\n    include_violations=True,  # Inject personal attacks, off-topic, etc.\n)\n'})}),"\n",(0,s.jsx)(i.h3,{id:"3-redis-storage",children:"3. Redis Storage"}),"\n",(0,s.jsx)(i.p,{children:"Results are stored with the key format:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"contribution_mockup:forseti461:charter:{date}:{id}\n"})}),"\n",(0,s.jsx)(i.p,{children:"This enables:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Historical tracking across prompt versions"}),"\n",(0,s.jsx)(i.li,{children:"Date-based analysis"}),"\n",(0,s.jsx)(i.li,{children:"Quick retrieval for dashboards"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"4-opik-dataset-export",children:"4. Opik Dataset Export"}),"\n",(0,s.jsxs)(i.p,{children:["Validation results export directly to ",(0,s.jsx)(i.strong,{children:"Opik"})," format for prompt optimization:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "input": {\n    "title": "...",\n    "body": "...",\n    "constat_factuel": "...",\n    "idees_ameliorations": "..."\n  },\n  "expected_output": {\n    "is_valid": true,\n    "violations": [],\n    "confidence": 0.92\n  }\n}\n'})}),"\n",(0,s.jsx)(i.p,{children:"This feeds into Opik's optimization studio where we can:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Run ",(0,s.jsx)(i.strong,{children:"FewShotBayesianOptimizer"})," to select best examples"]}),"\n",(0,s.jsxs)(i.li,{children:["Use ",(0,s.jsx)(i.strong,{children:"MetaPromptOptimizer"})," to refine the system prompt"]}),"\n",(0,s.jsx)(i.li,{children:"Create train/validation/test splits for proper evaluation"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"key-metrics",children:"Key Metrics"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Metric"}),(0,s.jsx)(i.th,{children:"Target"}),(0,s.jsx)(i.th,{children:"Why"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.strong,{children:"Recall"})}),(0,s.jsx)(i.td,{children:"> 98%"}),(0,s.jsx)(i.td,{children:"Missing a violation is worse than a false positive"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.strong,{children:"Precision"})}),(0,s.jsx)(i.td,{children:"> 95%"}),(0,s.jsx)(i.td,{children:"Avoid frustrating valid contributors"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.strong,{children:"F1 Score"})}),(0,s.jsx)(i.td,{children:"> 96%"}),(0,s.jsx)(i.td,{children:"Balanced performance"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,s.jsx)(i.p,{children:"With this testing infrastructure in place, we can now:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Generate diverse test sets"})," covering all 7 categories and violation types"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Run optimization experiments"})," using Opik's optimizer"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Track improvements"})," across prompt iterations"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Achieve confidence"})," that Forseti catches what it should"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"try-it-yourself",children:"Try It Yourself"}),"\n",(0,s.jsxs)(i.p,{children:["Navigate to the ",(0,s.jsx)(i.strong,{children:"Mockup"})," tab (",(0,s.jsx)(i.code,{children:"?tab=mockup"}),") to:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Load existing test contributions"}),"\n",(0,s.jsx)(i.li,{children:"Generate Levenshtein variations"}),"\n",(0,s.jsx)(i.li,{children:"Run batch validation"}),"\n",(0,s.jsx)(i.li,{children:"Export to Opik datasets"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Branch:"})," ",(0,s.jsx)(i.code,{children:"feature/logging_system"}),"\n",(0,s.jsx)(i.strong,{children:"Key files:"})]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"app/mockup/generator.py"})," - Contribution generation"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"app/mockup/levenshtein.py"})," - Mutation algorithms"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"app/mockup/storage.py"})," - Redis persistence"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"app/mockup/dataset.py"})," - Opik integration"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"app/mockup/batch_view.py"})," - Streamlit UI"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.em,{children:"Building trust in AI validation, one mutation at a time."})})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8287(e){e.exports=JSON.parse('{"permalink":"/blog/first-submission-mockup-system","editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/blog/2026-01-26-first-submission-mockup-system.mdx","source":"@site/blog/2026-01-26-first-submission-mockup-system.mdx","title":"First Submission: Building a Charter Validation Testing Framework","description":"Goal: Create a systematic approach to test and improve our AI-powered charter validation system.","date":"2026-01-26T00:00:00.000Z","tags":[{"inline":false,"label":"Encode hackathon","permalink":"/blog/tags/encode","description":"Information from the Encode hackathon"},{"inline":false,"label":"AI and Machine Learning","permalink":"/blog/tags/ai-ml","description":"Articles on AI, machine learning, and related technologies"},{"inline":false,"label":"civitech","permalink":"/blog/tags/civictech","description":"Citizen technologies and open source for the public good"},{"inline":false,"label":"Observability","permalink":"/blog/tags/observability","description":"Articles on observability practices and tools"}],"readingTime":2.53,"hasTruncateMarker":true,"authors":[{"name":"Jean-No\xebl Schilling","title":"Locki one / french maintainer","url":"https://github.com/jnschilling","socials":{"linkedin":"https://www.linkedin.com/in/jnschilling/","github":"https://github.com/jnschilling","newsletter":"https://www.stratej.fr"},"imageURL":"https://github.com/jnschilling.png","key":"jnxmas","page":null}],"frontMatter":{"slug":"first-submission-mockup-system","title":"First Submission: Building a Charter Validation Testing Framework","authors":["jnxmas"],"tags":["encode","ai-ml","civictech","observability"]},"unlisted":false,"prevItem":{"title":"Can Forseti461 be charter-proofed for any contribution types?","permalink":"/blog/forseti-first-prompt-optimization"},"nextItem":{"title":"Catch-up Call: Deployment Strategy","permalink":"/blog/meeting-ocapistaine-3"}}')},8453(e,i,n){n.d(i,{R:()=>o,x:()=>l});var t=n(6540);const s={},r=t.createContext(s);function o(e){const i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);