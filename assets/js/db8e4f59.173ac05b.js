"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[580],{7741(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"workflows/n8n_integrations/Participons-List-Issues","title":"Participons - List Issues","description":"Workflow ID: sRidwFGSiKYfYwEJ","source":"@site/docs/workflows/n8n_integrations/Participons-List-Issues.md","sourceDirName":"workflows/n8n_integrations","slug":"/workflows/n8n_integrations/Participons-List-Issues","permalink":"/docs/workflows/n8n_integrations/Participons-List-Issues","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/workflows/n8n_integrations/Participons-List-Issues.md","tags":[],"version":"current","frontMatter":{}}');var t=s(4848),r=s(8453);const o={},l="Participons - List Issues",a={},c=[{value:"Purpose",id:"purpose",level:2},{value:"Learnings &amp; Issues",id:"learnings--issues",level:2},{value:"1. GitHub Node - getAll Operation Not Available",id:"1-github-node---getall-operation-not-available",level:3},{value:"2. Credential Reference by ID",id:"2-credential-reference-by-id",level:3},{value:"3. MCP Visibility",id:"3-mcp-visibility",level:3},{value:"Workflow Structure",id:"workflow-structure",level:2},{value:"Nodes Configuration",id:"nodes-configuration",level:2},{value:"1. Webhook Trigger",id:"1-webhook-trigger",level:3},{value:"2. HTTP Request (GitHub API)",id:"2-http-request-github-api",level:3},{value:"3. Python Transform",id:"3-python-transform",level:3},{value:"4. Respond to Webhook",id:"4-respond-to-webhook",level:3},{value:"Input Parameters",id:"input-parameters",level:2},{value:"Output Format",id:"output-format",level:2},{value:"Webhook URL",id:"webhook-url",level:2},{value:"Testing",id:"testing",level:2},{value:"Related",id:"related",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"participons---list-issues",children:"Participons - List Issues"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Workflow ID:"})," ",(0,t.jsx)(n.code,{children:"sRidwFGSiKYfYwEJ"}),"\n",(0,t.jsx)(n.strong,{children:"Status:"})," Active (requires credential configuration)\n",(0,t.jsx)(n.strong,{children:"Created:"})," 2026-01-20"]}),"\n",(0,t.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,t.jsxs)(n.p,{children:["Fetch and filter issues from the ",(0,t.jsx)(n.code,{children:"audierne2026/participons"})," GitHub repository."]}),"\n",(0,t.jsx)(n.h2,{id:"learnings--issues",children:"Learnings & Issues"}),"\n",(0,t.jsx)(n.h3,{id:"1-github-node---getall-operation-not-available",children:"1. GitHub Node - getAll Operation Not Available"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Issue:"})," The ",(0,t.jsx)(n.code,{children:"getAll"})," operation for issues does not exist in the N8N GitHub node."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Use the HTTP Request node with GitHub REST API directly:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"GET https://api.github.com/repos/audierne2026/participons/issues\n"})}),"\n",(0,t.jsx)(n.p,{children:"With query parameters:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"state"}),": open | closed | all"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"labels"}),": comma-separated label names"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"per_page"}),": results per page (max 100)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"page"}),": page number"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-credential-reference-by-id",children:"2. Credential Reference by ID"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Issue:"})," Credentials must be referenced by their N8N internal ID, not by name."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error encountered:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Credential with ID "FORSETI_TOKEN" does not exist for type "githubApi".\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," In N8N UI, select the credential from the dropdown - N8N will automatically use the correct internal ID."]}),"\n",(0,t.jsx)(n.h3,{id:"3-mcp-visibility",children:"3. MCP Visibility"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Issue:"})," Workflows are not visible via MCP by default."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Setting:"})," ",(0,t.jsx)(n.code,{children:"availableInMCP: false"})," (default)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Enable MCP access in N8N workflow settings if you want to execute via MCP."]}),"\n",(0,t.jsx)(n.h2,{id:"workflow-structure",children:"Workflow Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Webhook      \u2502\u2500\u2500\u2500\u25ba\u2502 HTTP Request \u2502\u2500\u2500\u2500\u25ba\u2502 Python       \u2502\u2500\u2500\u2500\u25ba\u2502 Respond to   \u2502\n\u2502 Trigger      \u2502    \u2502 GitHub API   \u2502    \u2502 Transform    \u2502    \u2502 Webhook      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.h2,{id:"nodes-configuration",children:"Nodes Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"1-webhook-trigger",children:"1. Webhook Trigger"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Method:"})," POST"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Path:"})," ",(0,t.jsx)(n.code,{children:"participons/issues"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Response Mode:"})," Response Node"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-http-request-github-api",children:"2. HTTP Request (GitHub API)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Method: GET\nURL: https://api.github.com/repos/audierne2026/participons/issues\n\nQuery Parameters:\n  state: {{ $json.body.state || 'open' }}\n  labels: {{ $json.body.labels || 'Task' }}\n  per_page: {{ $json.body.per_page || 50 }}\n\nHeaders:\n  Authorization: Bearer {{ $credentials.githubApi.accessToken }}\n  Accept: application/vnd.github.v3+json\n  User-Agent: N8N-Forseti461\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-python-transform",children:"3. Python Transform"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import json\nimport re\n\ndef extract_category(issue):\n    \"\"\"Extract category from issue title, body, or labels.\"\"\"\n    title = issue.get('title', '')\n    body = issue.get('body', '') or ''\n    labels = issue.get('labels', [])\n\n    # Check title for [category]\n    title_match = re.search(r'\\[([^\\]]+)\\]', title)\n    if title_match:\n        return title_match.group(1).lower()\n\n    # Check body for Category: xxx\n    body_match = re.search(r'Category:\\s*(\\w+)', body, re.IGNORECASE)\n    if body_match:\n        return body_match.group(1).lower()\n\n    # Check labels\n    category_labels = [\n        'economie', 'logement', 'culture', 'ecologie',\n        'associations', 'jeunesse', 'alimentation-bien-etre-soins'\n    ]\n    for label in labels:\n        label_name = label.get('name', '') if isinstance(label, dict) else str(label)\n        if label_name.lower() in category_labels:\n            return label_name.lower()\n\n    return None\n\n\ndef transform_issues(github_issues):\n    print(f\"DEBUG: transform_issues received {len(github_issues)} raw issues\")\n    issues = []\n    for item in github_issues:\n        print(f\"DEBUG: processing item with title: {item.get('title', 'NO TITLE')}\")\n\n        # Extract label names (your code already handles list of dicts)\n        labels = item.get('labels', [])\n        label_names = [l['name'] if isinstance(l, dict) else str(l) for l in labels]\n\n        issues.append({\n            'id': item.get('number'),\n            'title': item.get('title'),\n            'body': item.get('body') or '',\n            'state': item.get('state'),\n            'labels': label_names,\n            'category': extract_category(item),\n            'created_at': item.get('created_at'),\n            'updated_at': item.get('updated_at'),\n            'html_url': item.get('html_url'),\n            'user': item.get('user', {}).get('login', 'unknown'),\n            'has_conforme_charte': 'conforme charte' in [l.lower() for l in label_names]\n        })\n    print(f\"DEBUG: transformed {len(issues)} issues\")\n    return {\n        'success': True,\n        'count': len(issues),\n        'issues': issues\n    }\n\n# \u2500\u2500 Safe input extraction \u2500\u2500\ngithub_issues = []\n\nif _items and len(_items) > 0:\n    raw = _items[0].get(\"json\", [])   # .get() prevents KeyError if \"json\" missing\n\n    if isinstance(raw, list):\n        github_issues = raw\n        print(f\"DEBUG: Found {len(github_issues)} issues in json payload\")\n    else:\n        print(\"DEBUG: json payload is not a list \u2192 type fallback used\")\n        github_issues = [raw] if raw else []\n\nelse:\n    print(\"DEBUG: No _items or empty input\")\n\nprint(f\"DEBUG: Final github_issues has {len(github_issues)} elements\")\n\n# Quick check on first item if exists\nif github_issues:\n    first = github_issues[0]\n    print(f\"DEBUG: First issue title: {first.get('title', 'MISSING TITLE')}\")\n    print(f\"DEBUG: Has body? {'body' in first}\")\n    print(f\"DEBUG: Has labels? {len(first.get('labels', [])) > 0}\")\n\nresult = transform_issues(github_issues)\nreturn [{'json': result}]\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-respond-to-webhook",children:"4. Respond to Webhook"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Respond With:"})," JSON"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Response Body:"})," ",(0,t.jsx)(n.code,{children:"{{ $json }}"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"input-parameters",children:"Input Parameters"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "state": "open", // open | closed | all (default: open)\n  "labels": "Task", // comma-separated (default: Task)\n  "per_page": 50 // max results (default: 50, max: 100)\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"output-format",children:"Output Format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "count": 15,\n  "issues": [\n    {\n      "id": 42,\n      "title": "[economie] Am\xe9lioration du port",\n      "body": "Proposition pour moderniser...",\n      "state": "open",\n      "labels": ["Task", "economie"],\n      "category": "economie",\n      "created_at": "2024-01-15T10:30:00Z",\n      "updated_at": "2024-01-16T14:20:00Z",\n      "html_url": "https://github.com/audierne2026/participons/issues/42",\n      "user": "citizen123",\n      "has_conforme_charte": false\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"webhook-url",children:"Webhook URL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'POST https://vaettir.locki.io/webhook/participons/issues\nContent-Type: application/json\n\n{\n  "state": "open",\n  "labels": "Task",\n  "per_page": 20\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://vaettir.locki.io/webhook/participons/issues" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"state": "open", "type": "Task","per_page": 5, "page": 1}\'\n'})}),"\n",(0,t.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/workflows/n8n-github-integration",children:"N8N GitHub Integration Design"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/agents/forseti/",children:"Forseti 461 Agent"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);