"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[9464],{3378(e,t,i){i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"methods/git-cache-cheats","title":"git-cache-cheats","description":"Here\'s a practical Git \\"cheat sheet\\" focused on removing files from the Git cache (index/staging area), untracking them, clearing ignored files that are still tracked, etc. These are the most common real-world scenarios in 2025\u20132026.","source":"@site/docs/methods/git-cache-cheats.md","sourceDirName":"methods","slug":"/methods/git-cache-cheats","permalink":"/docs/methods/git-cache-cheats","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/methods/git-cache-cheats.md","tags":[],"version":"current","frontMatter":{}}');var r=i(4848),n=i(8453);const c={},d=void 0,l={},o=[{value:"Quick reference: Remove / untrack files from Git cache",id:"quick-reference-remove--untrack-files-from-git-cache",level:3},{value:"Most frequent one-liners people copy-paste",id:"most-frequent-one-liners-people-copy-paste",level:3},{value:"Pro tips",id:"pro-tips",level:3}];function h(e){const t={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Here's a practical ",(0,r.jsx)(t.strong,{children:'Git "cheat sheet"'})," focused on ",(0,r.jsx)(t.strong,{children:"removing files from the Git cache"})," (index/staging area), untracking them, clearing ignored files that are still tracked, etc. These are the most common real-world scenarios in 2025\u20132026."]}),"\n",(0,r.jsx)(t.h3,{id:"quick-reference-remove--untrack-files-from-git-cache",children:"Quick reference: Remove / untrack files from Git cache"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Goal / Scenario"}),(0,r.jsx)(t.th,{children:"Command(s)"}),(0,r.jsx)(t.th,{children:"What it does"}),(0,r.jsx)(t.th,{children:"Important notes / warnings"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:["Stop tracking ",(0,r.jsx)(t.strong,{children:"one file"})," but ",(0,r.jsx)(t.strong,{children:"keep it locally"})]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"git rm --cached path/to/file.txt"})}),(0,r.jsx)(t.td,{children:"Removes from index only (untracks it). File stays on disk."}),(0,r.jsxs)(t.td,{children:["Then add to ",(0,r.jsx)(t.code,{children:".gitignore"})," if needed, then ",(0,r.jsx)(t.code,{children:"git commit"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:["Stop tracking ",(0,r.jsx)(t.strong,{children:"a directory"})," (recursive)"]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"git rm -r --cached path/to/dir/"})}),(0,r.jsx)(t.td,{children:"Untracks entire folder and subfiles, keeps them locally"}),(0,r.jsxs)(t.td,{children:["Use ",(0,r.jsx)(t.code,{children:"-r"})," for recursive"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:["Untrack ",(0,r.jsx)(t.strong,{children:"everything"})," (full cache refresh)"]}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"git rm -r --cached ."})," + ",(0,r.jsx)(t.code,{children:"git add ."})," + ",(0,r.jsx)(t.code,{children:'git commit -m "Refresh tracked files"'})]}),(0,r.jsxs)(t.td,{children:["Removes ",(0,r.jsx)(t.strong,{children:"all"})," files from index, then re-adds only non-ignored ones"]}),(0,r.jsxs)(t.td,{children:["Classic way to apply new ",(0,r.jsx)(t.code,{children:".gitignore"})," rules"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Unstage a file (remove from index, but keep changes)"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"git reset HEAD path/to/file.txt"})," or ",(0,r.jsx)(t.code,{children:"git restore --staged path/to/file.txt"})]}),(0,r.jsx)(t.td,{children:"Only unstages (Git \u22652.23). File stays modified locally"}),(0,r.jsxs)(t.td,{children:["Safer than ",(0,r.jsx)(t.code,{children:"rm --cached"})," if you still want to track it later"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:["Delete file ",(0,r.jsx)(t.strong,{children:"both locally and from Git"})]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"git rm path/to/file.txt"})}),(0,r.jsxs)(t.td,{children:["Removes from index ",(0,r.jsx)(t.strong,{children:"and"})," deletes from disk"]}),(0,r.jsx)(t.td,{children:"Use when you really want it gone"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Remove untracked files / folders (cleanup)"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"git clean -fd"})," or preview first: ",(0,r.jsx)(t.code,{children:"git clean -n -fd"})]}),(0,r.jsx)(t.td,{children:"Deletes untracked files/directories (not in Git)"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"-f"})," = force, ",(0,r.jsx)(t.code,{children:"-d"})," = directories, ",(0,r.jsx)(t.code,{children:"-x"})," = also ignored files"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Force apply new .gitignore"})," (very common)"]}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:'echo "newpattern/" >> .gitignore'})," + ",(0,r.jsx)(t.code,{children:"git rm -r --cached ."})," + ",(0,r.jsx)(t.code,{children:"git add ."})," + ",(0,r.jsx)(t.code,{children:'git commit -m "Apply new ignores"'})]}),(0,r.jsxs)(t.td,{children:["Makes Git respect updated ",(0,r.jsx)(t.code,{children:".gitignore"})," by re-adding only allowed files"]}),(0,r.jsxs)(t.td,{children:["Do this when ignored files still show up in ",(0,r.jsx)(t.code,{children:"git status"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Permanently remove file from history"})," (sensitive data, big files)"]}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"git filter-repo --path path/to/badfile --invert-paths --force"})," (or old way: ",(0,r.jsx)(t.code,{children:"git filter-branch -- ..."}),")"]}),(0,r.jsx)(t.td,{children:"Rewrites history to erase the file completely"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Dangerous"})," \u2014 changes commit hashes. Use ",(0,r.jsx)(t.code,{children:"git filter-repo"})," (modern tool)"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:["Undo a ",(0,r.jsx)(t.code,{children:"git rm --cached"})," (before commit)"]}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"git reset HEAD path/to/file.txt"})," + or ",(0,r.jsx)(t.code,{children:"git add path/to/file.txt"})]}),(0,r.jsx)(t.td,{children:"Puts it back into the index"}),(0,r.jsx)(t.td,{children:"Only works if not yet committed"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"most-frequent-one-liners-people-copy-paste",children:"Most frequent one-liners people copy-paste"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Fix .gitignore not working"})," (ignored files still tracked):"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'git rm -r --cached .\ngit add .\ngit commit -m "Apply updated .gitignore"\n'})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Untrack a single accidentally committed file"})," (e.g. ",(0,r.jsx)(t.code,{children:".env"}),", logs, build/):"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'git rm --cached .env\necho ".env" >> .gitignore\ngit add .gitignore\ngit commit -m "Stop tracking .env"\n'})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Nuke untracked junk + reset cache"})," (extra clean server/repo):"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"git fetch\ngit reset --hard origin/main          # or your branch\ngit clean -fdx                        # removes untracked + ignored files\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"pro-tips",children:"Pro tips"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Always run ",(0,r.jsx)(t.code,{children:"git status"})," first to see what's about to be affected."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"--cached"}),' = magic flag: "only touch Git\'s index, leave my files alone".']}),"\n",(0,r.jsxs)(t.li,{children:["After any ",(0,r.jsx)(t.code,{children:"rm --cached"}),", commit the change \u2014 otherwise the untracking isn't saved."]}),"\n",(0,r.jsx)(t.li,{children:"If the file was already pushed to GitHub/remote \u2192 after commit, others will need to pull/reset too (or they'll keep the old file)."}),"\n"]})]})}function a(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,t,i){i.d(t,{R:()=>c,x:()=>d});var s=i(6540);const r={},n=s.createContext(r);function c(e){const t=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);