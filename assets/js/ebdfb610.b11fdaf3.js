"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[6795],{948(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"sovereignty/rag-document-storage","title":"RAG Document Storage Architecture","description":"Status: RFC (Request for Comments)","source":"@site/docs/sovereignty/rag-document-storage.md","sourceDirName":"sovereignty","slug":"/sovereignty/rag-document-storage","permalink":"/docs/sovereignty/rag-document-storage","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/sovereignty/rag-document-storage.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sovereigntySidebar","next":{"title":"RAG Document Storage Architecture","permalink":"/docs/sovereignty/rag-document-storage"}}');var r=i(4848),s=i(8453);const d={},a="RAG Document Storage Architecture",l={},c=[{value:"Executive Summary",id:"executive-summary",level:2},{value:"Problem Statement",id:"problem-statement",level:2},{value:"Current State",id:"current-state",level:3},{value:"Issues",id:"issues",level:3},{value:"Key Considerations",id:"key-considerations",level:2},{value:"Data Sovereignty (RGPD/GDPR)",id:"data-sovereignty-rgpdgdpr",level:3},{value:"RAG Integration",id:"rag-integration",level:3},{value:"Scalability Requirements",id:"scalability-requirements",level:3},{value:"Scenarios Evaluated",id:"scenarios-evaluated",level:2},{value:"Scenario 1: Git LFS + Manifest",id:"scenario-1-git-lfs--manifest",level:3},{value:"Scenario 2: External Object Storage + Sync",id:"scenario-2-external-object-storage--sync",level:3},{value:"Scenario 3: Multi-Repo with Submodules",id:"scenario-3-multi-repo-with-submodules",level:3},{value:"Scenario 4: MongoDB GridFS (Recommended)",id:"scenario-4-mongodb-gridfs-recommended",level:3},{value:"Scenario 5: DVC (Data Version Control)",id:"scenario-5-dvc-data-version-control",level:3},{value:"Recommendation: Enhanced MongoDB GridFS",id:"recommendation-enhanced-mongodb-gridfs",level:2},{value:"Why MongoDB GridFS?",id:"why-mongodb-gridfs",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Document Schema",id:"document-schema",level:3},{value:"Implementation Plan",id:"implementation-plan",level:2},{value:"Phase 1: Immediate (Hackathon)",id:"phase-1-immediate-hackathon",level:3},{value:"1.1 Update <code>.gitignore</code>",id:"11-update-gitignore",level:4},{value:"1.2 Create Manifest Template",id:"12-create-manifest-template",level:4},{value:"1.3 Local Development Workflow",id:"13-local-development-workflow",level:4},{value:"Phase 2: MongoDB Integration (Post-Hackathon)",id:"phase-2-mongodb-integration-post-hackathon",level:3},{value:"2.1 Infrastructure Setup",id:"21-infrastructure-setup",level:4},{value:"2.2 Ingestion Script",id:"22-ingestion-script",level:4},{value:"2.3 Download Script",id:"23-download-script",level:4},{value:"2.4 RAG Query Integration",id:"24-rag-query-integration",level:4},{value:"Phase 3: Multi-Municipality &amp; Governance",id:"phase-3-multi-municipality--governance",level:3},{value:"3.1 Municipality Onboarding",id:"31-municipality-onboarding",level:4},{value:"3.2 Sharding Strategy",id:"32-sharding-strategy",level:4},{value:"3.3 RGPD Compliance Checklist",id:"33-rgpd-compliance-checklist",level:4},{value:"Cost Analysis",id:"cost-analysis",level:2},{value:"Self-Hosted (Recommended)",id:"self-hosted-recommended",level:3},{value:"MongoDB Atlas (Managed)",id:"mongodb-atlas-managed",level:3},{value:"Trade-offs Summary",id:"trade-offs-summary",level:2},{value:"References",id:"references",level:2},{value:"Changelog",id:"changelog",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"rag-document-storage-architecture",children:"RAG Document Storage Architecture"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status"}),": RFC (Request for Comments)\n",(0,r.jsx)(n.strong,{children:"Author"}),": @jnxmas\n",(0,r.jsx)(n.strong,{children:"Date"}),": 2026-01-28\n",(0,r.jsx)(n.strong,{children:"Related"}),": ",(0,r.jsx)(n.a,{href:"/docs/ARCHITECTURE",children:"ARCHITECTURE.md"}),", ",(0,r.jsx)(n.a,{href:"#phase-2-mongodb-integration",children:"MongoDB Integration"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"executive-summary",children:"Executive Summary"}),"\n",(0,r.jsx)(n.p,{children:"This document outlines the architectural decision for storing and managing documents used in the OCapistaine RAG (Retrieval Augmented Generation) system. The solution must support:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple municipalities"})," (starting with Audierne, scaling to others)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data sovereignty"})," (GDPR/RGPD compliance, EU data residency)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RAG pipeline integration"})," (chunking, embeddings, vector search)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Separation of code and data"})," (no large binaries in git)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Recommendation"}),": MongoDB GridFS with EU-hosted infrastructure, integrated with Mistral embeddings."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"problem-statement",children:"Problem Statement"}),"\n",(0,r.jsx)(n.h3,{id:"current-state",children:"Current State"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sources/                    # ~16MB now, could grow to GB+\n\u251c\u2500\u2500 CCCSPR/                 # PDFs committed to git\n\u251c\u2500\u2500 economie/               # Large binaries bloat repo\n\u251c\u2500\u2500 previous_campagne/      # Historical context (2020 campaign)\n\u251c\u2500\u2500 ext_data/gwaien/        # ~40 municipal bulletins (2008-2025)\n\u2514\u2500\u2500 intergenerationel/      # Program documents\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issues",children:"Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Problem"}),(0,r.jsx)(n.th,{children:"Impact"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Git not designed for large binaries"}),(0,r.jsx)(n.td,{children:"Slow clone, bloated history"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Hard to scale to multiple municipalities"}),(0,r.jsx)(n.td,{children:"No namespace/partition strategy"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"No versioning for document updates"}),(0,r.jsx)(n.td,{children:"Can't track deliberation amendments"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mixed concerns: code + data"}),(0,r.jsx)(n.td,{children:"Deployment complexity"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"No sovereignty controls"}),(0,r.jsx)(n.td,{children:"Data location unknown"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"key-considerations",children:"Key Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"data-sovereignty-rgpdgdpr",children:"Data Sovereignty (RGPD/GDPR)"}),"\n",(0,r.jsx)(n.p,{children:"For civic data (municipal PDFs, citizen contributions):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": Data must stay in France/EU"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Providers"}),": Prefer OVH, Scaleway, or self-hosted over US-centric clouds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Encryption"}),": At rest and in transit (X.509 certs)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Audit"}),": Access logs, data residency tracking"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consent"}),": Anonymity handling for citizen data"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"rag-integration",children:"RAG Integration"}),"\n",(0,r.jsx)(n.p,{children:"Documents need to be:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chunked"}),": Split into semantic segments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Embedded"}),": Vector representations (Mistral embeddings recommended - French company, EU-aligned)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Indexed"}),": In a vector store for similarity search"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Queryable"}),": Filter by municipality, category, date"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scalability-requirements",children:"Scalability Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Handle GB+ of documents per municipality"}),"\n",(0,r.jsx)(n.li,{children:"Municipality-specific partitioning (namespacing)"}),"\n",(0,r.jsx)(n.li,{children:"Version tracking for updated documents"}),"\n",(0,r.jsx)(n.li,{children:"Support for multiple document types (PDF, images, audio transcripts)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"scenarios-evaluated",children:"Scenarios Evaluated"}),"\n",(0,r.jsx)(n.h3,{id:"scenario-1-git-lfs--manifest",children:"Scenario 1: Git LFS + Manifest"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sources/\n\u251c\u2500\u2500 manifest.yaml           # Tracked - describes all sources\n\u251c\u2500\u2500 .gitkeep\n\u2514\u2500\u2500 [files fetched on demand via LFS]\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Assessment"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sovereignty"}),(0,r.jsx)(n.td,{children:"Low (GitHub US-based, LFS storage limits)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAG Fit"}),(0,r.jsx)(n.td,{children:"Poor (binary tracking bloats clones, no native querying)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scalability"}),(0,r.jsx)(n.td,{children:"Limited by LFS quotas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Verdict"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Not recommended"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-2-external-object-storage--sync",children:"Scenario 2: External Object Storage + Sync"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sources/\n\u251c\u2500\u2500 manifest.yaml           # Source registry (git tracked)\n\u251c\u2500\u2500 sync.py                 # Fetches from S3/MinIO\n\u2514\u2500\u2500 .gitignore              # Ignores all fetched files\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storage Options:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Provider"}),(0,r.jsx)(n.th,{children:"Cost"}),(0,r.jsx)(n.th,{children:"Self-hosted"}),(0,r.jsx)(n.th,{children:"EU Residency"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AWS S3"}),(0,r.jsx)(n.td,{children:"~$0.02/GB"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"EU regions"}),(0,r.jsx)(n.td,{children:"Standard, requires IAM"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"MinIO"}),(0,r.jsx)(n.td,{children:"Free"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Full control"}),(0,r.jsx)(n.td,{children:"S3-compatible, recommended"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cloudflare R2"}),(0,r.jsx)(n.td,{children:"Free egress"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"EU possible"}),(0,r.jsx)(n.td,{children:"Good for serving"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scaleway Object"}),(0,r.jsx)(n.td,{children:"~$0.01/GB"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"France"}),(0,r.jsx)(n.td,{children:"Native EU"})]})]})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Assessment"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sovereignty"}),(0,r.jsx)(n.td,{children:"Strong with MinIO/Scaleway"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAG Fit"}),(0,r.jsx)(n.td,{children:"Good (store blobs, metadata in separate DB)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scalability"}),(0,r.jsx)(n.td,{children:"Excellent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Verdict"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Good option for pure file storage"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-3-multi-repo-with-submodules",children:"Scenario 3: Multi-Repo with Submodules"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ocapistaine/                      # Main code repo\n\u251c\u2500\u2500 sources/                      # Git submodule\n\nlocki-io/ocapistaine-sources/     # Separate data repo\n\u251c\u2500\u2500 audierne/\n\u251c\u2500\u2500 [future-municipality]/\n\u2514\u2500\u2500 manifest.yaml\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Assessment"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sovereignty"}),(0,r.jsx)(n.td,{children:"Tied to GitHub"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAG Fit"}),(0,r.jsx)(n.td,{children:"Clunky (frequent pulls for updates)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scalability"}),(0,r.jsx)(n.td,{children:"Limited by git"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Verdict"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Avoid for large-scale"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-4-mongodb-gridfs-recommended",children:"Scenario 4: MongoDB GridFS (Recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sources/                    # Local working directory (gitignored)\n\u251c\u2500\u2500 manifest.yaml           # Document registry\n\u2514\u2500\u2500 download.py             # Fetches from MongoDB GridFS\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Assessment"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sovereignty"}),(0,r.jsx)(n.td,{children:"Excellent (self-host or EU Atlas)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAG Fit"}),(0,r.jsx)(n.td,{children:"Native vector search, unified storage"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scalability"}),(0,r.jsx)(n.td,{children:"Sharding, municipality partitioning"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Verdict"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Recommended"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-5-dvc-data-version-control",children:"Scenario 5: DVC (Data Version Control)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sources/\n\u251c\u2500\u2500 audierne.dvc            # Pointer file (git tracked)\n\u251c\u2500\u2500 .dvc/                   # DVC config\n\u2514\u2500\u2500 audierne/               # Actual files (gitignored)\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"Assessment"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sovereignty"}),(0,r.jsx)(n.td,{children:"Depends on backend"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAG Fit"}),(0,r.jsx)(n.td,{children:"Sync to local, then process"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scalability"}),(0,r.jsx)(n.td,{children:"Good with S3/MinIO backend"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Verdict"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Solid alternative for git-style data ops"})})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"recommendation-enhanced-mongodb-gridfs",children:"Recommendation: Enhanced MongoDB GridFS"}),"\n",(0,r.jsx)(n.h3,{id:"why-mongodb-gridfs",children:"Why MongoDB GridFS?"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Already in stack"}),": MongoDB selected for RAG content storage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unified system"}),": Metadata + binaries + vectors in one place"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sovereignty"}),": Self-host Community Edition or use EU-region Atlas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RAG-native"}),": ",(0,r.jsx)(n.code,{children:"$vectorSearch"})," for similarity queries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No vendor lock-in"}),": Exportable anytime, standard formats"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    MongoDB (EU-hosted)                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  ocapistaine_sources database                               \u2502\n\u2502  \u251c\u2500\u2500 municipalities        # {code, name, config}           \u2502\n\u2502  \u251c\u2500\u2500 documents             # Metadata + vectors             \u2502\n\u2502  \u2502   \u251c\u2500\u2500 municipality_id   # Partition key                  \u2502\n\u2502  \u2502   \u251c\u2500\u2500 category          # gwaien, deliberations, etc.    \u2502\n\u2502  \u2502   \u251c\u2500\u2500 filename          # Original name                  \u2502\n\u2502  \u2502   \u251c\u2500\u2500 gridfs_id         # Link to binary                 \u2502\n\u2502  \u2502   \u251c\u2500\u2500 vector_embedding  # Mistral-generated              \u2502\n\u2502  \u2502   \u2514\u2500\u2500 sovereignty       # {location, encrypted, consent} \u2502\n\u2502  \u2514\u2500\u2500 fs.files / fs.chunks  # GridFS binary storage          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    RAG Pipeline                              \u2502\n\u2502  \u251c\u2500\u2500 Mistral Embeddings (EU API or local Ollama)            \u2502\n\u2502  \u251c\u2500\u2500 LangChain MongoDBAtlasVectorSearch                     \u2502\n\u2502  \u2514\u2500\u2500 Query with municipality filter                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h3,{id:"document-schema",children:"Document Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "_id": "ObjectId()",\n  "municipality": "audierne",\n  "category": "gwaien",\n  "filename": "Gwaien_n17_2025.pdf",\n  "origin": "manual_scan",\n  "uploaded_at": "ISODate(\'2026-01-28T00:00:00Z\')",\n  "version": 1,\n  "tags": ["bulletin", "2025", "municipal"],\n  "sovereignty": {\n    "location": "EU-FR",\n    "encrypted": true,\n    "consent_required": false,\n    "retention_policy": "permanent"\n  },\n  "content": {\n    "text_extracted": true,\n    "ocr_required": false,\n    "language": "fr",\n    "page_count": 12\n  },\n  "gridfs_id": "ObjectId()",\n  "vector_embedding": [0.1, 0.2, "...768 dimensions..."]\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"implementation-plan",children:"Implementation Plan"}),"\n",(0,r.jsx)(n.h3,{id:"phase-1-immediate-hackathon",children:"Phase 1: Immediate (Hackathon)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Stop committing binaries, establish manifest pattern."]}),"\n",(0,r.jsxs)(n.h4,{id:"11-update-gitignore",children:["1.1 Update ",(0,r.jsx)(n.code,{children:".gitignore"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gitignore",children:"# RAG source documents (fetched from MongoDB, not committed)\nsources/**/*.pdf\nsources/**/*.jpg\nsources/**/*.jpeg\nsources/**/*.png\nsources/**/pdfs/\n\n# Keep manifests and READMEs\n!sources/**/manifest.yaml\n!sources/**/README.md\n!sources/**/*.md\n"})}),"\n",(0,r.jsx)(n.h4,{id:"12-create-manifest-template",children:"1.2 Create Manifest Template"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sources/manifest.yaml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# OCapistaine RAG Document Registry\n# This file tracks all document sources for the RAG system\n# Actual files are stored in MongoDB GridFS, not git\n\nversion: "1.0"\nlast_updated: "2026-01-28"\n\nmunicipalities:\n  audierne:\n    code: "29003"\n    name: "Audierne"\n    sources:\n      - name: gwaien_bulletins\n        type: pdf_collection\n        description: "Municipal bulletin (2008-2025)"\n        origin: local_scan\n        local_path: ext_data/gwaien/\n        count: 40\n        uploaded: false\n        sovereignty:\n          location: EU-FR\n          classification: public\n\n      - name: deliberations\n        type: pdf_collection\n        description: "Council deliberations"\n        origin: firecrawl\n        source_url: https://audierne.bzh/deliberations-conseil-municipal/\n        count: ~4000\n        uploaded: false\n\n      - name: arretes\n        type: pdf_collection\n        description: "Municipal decrees"\n        origin: firecrawl\n        source_url: https://audierne.bzh/publications-arretes/\n        count: ~4010\n        uploaded: false\n\n      - name: previous_campaign\n        type: mixed\n        description: "2020 campaign materials"\n        origin: facebook_archive\n        count: 13\n        uploaded: false\n        sovereignty:\n          classification: historical\n\n      - name: cccspr_statutes\n        type: pdf\n        description: "CCCSPR modification statutes"\n        origin: official\n        filename: "2024-10-29-AP-modification-statuts-CCCSPR.pdf"\n        uploaded: false\n\n# Future municipalities template\n# [municipality_code]:\n#   code: "XXXXX"\n#   name: "Municipality Name"\n#   sources: [...]\n'})}),"\n",(0,r.jsx)(n.h4,{id:"13-local-development-workflow",children:"1.3 Local Development Workflow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Developers clone repo (no large files)\ngit clone git@github.com:locki-io/ocapistaine.git\n\n# Fetch documents from MongoDB (Phase 2+)\npython sources/download.py --municipality audierne\n\n# Or for hackathon: manual file sharing via secure transfer\n"})}),"\n",(0,r.jsx)(n.h3,{id:"phase-2-mongodb-integration-post-hackathon",children:"Phase 2: MongoDB Integration (Post-Hackathon)"}),"\n",(0,r.jsx)(n.h4,{id:"21-infrastructure-setup",children:"2.1 Infrastructure Setup"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Option A: Self-hosted (Recommended for sovereignty)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# On OVH/Scaleway VPS (France)\ndocker run -d --name mongodb \\\n  -p 27017:27017 \\\n  -v /data/mongodb:/data/db \\\n  -e MONGO_INITDB_ROOT_USERNAME=admin \\\n  -e MONGO_INITDB_ROOT_PASSWORD=<secure> \\\n  mongo:7.0 --auth\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Option B: MongoDB Atlas (EU Region)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create cluster in ",(0,r.jsx)(n.code,{children:"EU_WEST_1"})," (Ireland) or ",(0,r.jsx)(n.code,{children:"EU_WEST_3"})," (Paris)"]}),"\n",(0,r.jsx)(n.li,{children:"Enable encryption at rest"}),"\n",(0,r.jsx)(n.li,{children:"Configure IP allowlist"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"22-ingestion-script",children:"2.2 Ingestion Script"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sources/upload.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""Upload documents to MongoDB GridFS with metadata and embeddings."""\n\nimport os\nfrom pathlib import Path\nfrom datetime import datetime\nfrom pymongo import MongoClient\nfrom gridfs import GridFS\nimport fitz  # PyMuPDF for PDF text extraction\nfrom sentence_transformers import SentenceTransformer\nimport yaml\n\n# Configuration\nMONGO_URI = os.getenv("MONGODB_URI", "mongodb://localhost:27017/")\nDB_NAME = "ocapistaine_sources"\nEMBEDDING_MODEL = "intfloat/multilingual-e5-base"  # Or Mistral via API\n\n# Initialize\nclient = MongoClient(MONGO_URI)\ndb = client[DB_NAME]\nfs = GridFS(db)\nmodel = SentenceTransformer(EMBEDDING_MODEL)\n\n\ndef extract_text_from_pdf(file_path: str) -> str:\n    """Extract text from PDF using PyMuPDF."""\n    doc = fitz.open(file_path)\n    text = ""\n    for page in doc:\n        text += page.get_text()\n    doc.close()\n    return text\n\n\ndef upload_document(\n    municipality: str,\n    category: str,\n    file_path: str,\n    metadata: dict = None\n) -> str:\n    """Upload a document to GridFS with metadata and embedding."""\n\n    file_path = Path(file_path)\n    filename = file_path.name\n\n    # Check if already uploaded\n    existing = db.documents.find_one({\n        "municipality": municipality,\n        "filename": filename\n    })\n    if existing:\n        print(f"Skipping {filename} - already uploaded")\n        return str(existing["_id"])\n\n    # Upload binary to GridFS\n    with open(file_path, "rb") as f:\n        gridfs_id = fs.put(f, filename=filename)\n\n    # Extract text and generate embedding\n    text = ""\n    embedding = []\n    if file_path.suffix.lower() == ".pdf":\n        text = extract_text_from_pdf(str(file_path))\n        if text.strip():\n            # Truncate for embedding (model limit)\n            embedding = model.encode(text[:8000]).tolist()\n\n    # Build document record\n    doc = {\n        "municipality": municipality,\n        "category": category,\n        "filename": filename,\n        "origin": metadata.get("origin", "unknown") if metadata else "unknown",\n        "uploaded_at": datetime.utcnow(),\n        "version": 1,\n        "tags": metadata.get("tags", []) if metadata else [],\n        "sovereignty": {\n            "location": "EU-FR",\n            "encrypted": True,\n            "consent_required": False\n        },\n        "content": {\n            "text_extracted": bool(text),\n            "text_length": len(text),\n            "page_count": metadata.get("page_count") if metadata else None\n        },\n        "gridfs_id": gridfs_id,\n        "vector_embedding": embedding\n    }\n\n    result = db.documents.insert_one(doc)\n    print(f"Uploaded {filename} -> {result.inserted_id}")\n    return str(result.inserted_id)\n\n\ndef upload_from_manifest(manifest_path: str = "sources/manifest.yaml"):\n    """Upload all documents defined in manifest."""\n\n    with open(manifest_path) as f:\n        manifest = yaml.safe_load(f)\n\n    for muni_code, muni_data in manifest.get("municipalities", {}).items():\n        print(f"\\n=== Processing {muni_data[\'name\']} ===")\n\n        for source in muni_data.get("sources", []):\n            if source.get("uploaded"):\n                continue\n\n            local_path = source.get("local_path")\n            if not local_path:\n                continue\n\n            full_path = Path("sources") / local_path\n            if not full_path.exists():\n                print(f"Path not found: {full_path}")\n                continue\n\n            # Upload all files in directory\n            if full_path.is_dir():\n                for file in full_path.glob("**/*"):\n                    if file.is_file() and file.suffix.lower() in [".pdf", ".jpg", ".jpeg", ".png"]:\n                        upload_document(\n                            municipality=muni_code,\n                            category=source["name"],\n                            file_path=str(file),\n                            metadata={"origin": source.get("origin")}\n                        )\n            else:\n                upload_document(\n                    municipality=muni_code,\n                    category=source["name"],\n                    file_path=str(full_path),\n                    metadata={"origin": source.get("origin")}\n                )\n\n\nif __name__ == "__main__":\n    import argparse\n    parser = argparse.ArgumentParser()\n    parser.add_argument("--manifest", default="sources/manifest.yaml")\n    parser.add_argument("--file", help="Upload single file")\n    parser.add_argument("--municipality", default="audierne")\n    parser.add_argument("--category", default="misc")\n    args = parser.parse_args()\n\n    if args.file:\n        upload_document(args.municipality, args.category, args.file)\n    else:\n        upload_from_manifest(args.manifest)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"23-download-script",children:"2.3 Download Script"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sources/download.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""Download documents from MongoDB GridFS to local cache."""\n\nimport os\nfrom pathlib import Path\nfrom pymongo import MongoClient\nfrom gridfs import GridFS\n\nMONGO_URI = os.getenv("MONGODB_URI", "mongodb://localhost:27017/")\nDB_NAME = "ocapistaine_sources"\nCACHE_DIR = Path("sources/.cache")\n\nclient = MongoClient(MONGO_URI)\ndb = client[DB_NAME]\nfs = GridFS(db)\n\n\ndef download_documents(\n    municipality: str = None,\n    category: str = None,\n    since: str = None\n):\n    """Download documents matching filters to local cache."""\n\n    query = {}\n    if municipality:\n        query["municipality"] = municipality\n    if category:\n        query["category"] = category\n    if since:\n        from datetime import datetime\n        query["uploaded_at"] = {"$gte": datetime.fromisoformat(since)}\n\n    docs = db.documents.find(query)\n\n    for doc in docs:\n        # Create directory structure\n        out_dir = CACHE_DIR / doc["municipality"] / doc["category"]\n        out_dir.mkdir(parents=True, exist_ok=True)\n\n        out_path = out_dir / doc["filename"]\n        if out_path.exists():\n            print(f"Cached: {out_path}")\n            continue\n\n        # Fetch from GridFS\n        grid_out = fs.get(doc["gridfs_id"])\n        with open(out_path, "wb") as f:\n            f.write(grid_out.read())\n\n        print(f"Downloaded: {out_path}")\n\n\nif __name__ == "__main__":\n    import argparse\n    parser = argparse.ArgumentParser()\n    parser.add_argument("--municipality", "-m")\n    parser.add_argument("--category", "-c")\n    parser.add_argument("--since", help="ISO date filter")\n    args = parser.parse_args()\n\n    download_documents(args.municipality, args.category, args.since)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"24-rag-query-integration",children:"2.4 RAG Query Integration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# In your RAG pipeline (e.g., app/rag/retriever.py)\n\nfrom langchain_mongodb import MongoDBAtlasVectorSearch\nfrom langchain_community.embeddings import HuggingFaceEmbeddings\n\nembeddings = HuggingFaceEmbeddings(model_name="intfloat/multilingual-e5-base")\n\nvector_store = MongoDBAtlasVectorSearch.from_connection_string(\n    connection_string=MONGO_URI,\n    namespace="ocapistaine_sources.documents",\n    embedding=embeddings,\n    index_name="vector_index",\n    text_key="content.text"  # Or store chunked text separately\n)\n\n# Query with municipality filter\nresults = vector_store.similarity_search(\n    query="propositions budget port",\n    k=5,\n    pre_filter={"municipality": "audierne", "category": "deliberations"}\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"phase-3-multi-municipality--governance",children:"Phase 3: Multi-Municipality & Governance"}),"\n",(0,r.jsx)(n.h4,{id:"31-municipality-onboarding",children:"3.1 Municipality Onboarding"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# Add to manifest.yaml\nmunicipalities:\n  audierne:\n    # ... existing ...\n\n  douarnenez:\n    code: "29046"\n    name: "Douarnenez"\n    sources:\n      - name: deliberations\n        type: pdf_collection\n        source_url: https://douarnenez.bzh/...\n        # ...\n'})}),"\n",(0,r.jsx)(n.h4,{id:"32-sharding-strategy",children:"3.2 Sharding Strategy"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// MongoDB sharding by municipality\nsh.enableSharding("ocapistaine_sources")\nsh.shardCollection("ocapistaine_sources.documents", { "municipality": 1 })\n'})}),"\n",(0,r.jsx)(n.h4,{id:"33-rgpd-compliance-checklist",children:"3.3 RGPD Compliance Checklist"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Data residency documented per municipality"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Encryption at rest enabled"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Access audit logs configured"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Retention policies defined"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Consent tracking for citizen-submitted content"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Data export capability (Article 20)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Right to erasure workflow (Article 17)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"cost-analysis",children:"Cost Analysis"}),"\n",(0,r.jsx)(n.h3,{id:"self-hosted-recommended",children:"Self-Hosted (Recommended)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Component"}),(0,r.jsx)(n.th,{children:"Provider"}),(0,r.jsx)(n.th,{children:"Monthly Cost"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VPS (4GB RAM)"}),(0,r.jsx)(n.td,{children:"OVH/Scaleway"}),(0,r.jsx)(n.td,{children:"~10 EUR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Storage (100GB)"}),(0,r.jsx)(n.td,{children:"Included"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Backup"}),(0,r.jsx)(n.td,{children:"S3-compatible"}),(0,r.jsx)(n.td,{children:"~2 EUR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Total"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"~12 EUR/month"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"mongodb-atlas-managed",children:"MongoDB Atlas (Managed)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Tier"}),(0,r.jsx)(n.th,{children:"Storage"}),(0,r.jsx)(n.th,{children:"Monthly Cost"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"M10 (Shared)"}),(0,r.jsx)(n.td,{children:"10GB"}),(0,r.jsx)(n.td,{children:"~50 EUR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"M20 (Dedicated)"}),(0,r.jsx)(n.td,{children:"40GB"}),(0,r.jsx)(n.td,{children:"~120 EUR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"M30 (Production)"}),(0,r.jsx)(n.td,{children:"100GB"}),(0,r.jsx)(n.td,{children:"~300 EUR"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Recommendation"}),": Start self-hosted for hackathon/MVP, consider Atlas for production if ops overhead becomes a concern."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"trade-offs-summary",children:"Trade-offs Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Approach"}),(0,r.jsx)(n.th,{children:"Sovereignty"}),(0,r.jsx)(n.th,{children:"RAG Fit"}),(0,r.jsx)(n.th,{children:"Ops Effort"}),(0,r.jsx)(n.th,{children:"Cost"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Git LFS"}),(0,r.jsx)(n.td,{children:"Low"}),(0,r.jsx)(n.td,{children:"Poor"}),(0,r.jsx)(n.td,{children:"Low"}),(0,r.jsx)(n.td,{children:"Free"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"MinIO + DB"}),(0,r.jsx)(n.td,{children:"High"}),(0,r.jsx)(n.td,{children:"Good"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Low"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"MongoDB GridFS"}),(0,r.jsx)(n.td,{children:"High"}),(0,r.jsx)(n.td,{children:"Excellent"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Low-Medium"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"DVC"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Good"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Low"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Atlas Managed"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Excellent"}),(0,r.jsx)(n.td,{children:"Low"}),(0,r.jsx)(n.td,{children:"High"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Winner"}),": Self-hosted MongoDB GridFS balances sovereignty, RAG integration, and cost."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.mongodb.com/docs/manual/core/gridfs/",children:"MongoDB GridFS Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://python.langchain.com/docs/integrations/vectorstores/mongodb_atlas",children:"LangChain MongoDB Integration"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://mistral.ai/",children:"Mistral AI Platform"})," - EU-based LLM provider"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.cnil.fr/fr/rgpd-de-quoi-parle-t-on",children:"RGPD/GDPR Guidelines"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.ovhcloud.com/fr/",children:"OVH Cloud (France)"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.scaleway.com/",children:"Scaleway (France)"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"changelog",children:"Changelog"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Date"}),(0,r.jsx)(n.th,{children:"Change"}),(0,r.jsx)(n.th,{children:"Author"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2026-01-28"}),(0,r.jsx)(n.td,{children:"Initial RFC"}),(0,r.jsx)(n.td,{children:"@jnxmas"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>a});var t=i(6540);const r={},s=t.createContext(r);function d(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);