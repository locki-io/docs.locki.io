"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[2044],{2093(e,r,n){n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"app/STREAMLIT_QUICKSTART","title":"Streamlit Quick Start - Fix 403 WebSocket Error","description":"Quick fix for \\"You need to enable JavaScript\\" and 403 WebSocket errors.","source":"@site/docs/app/STREAMLIT_QUICKSTART.md","sourceDirName":"app","slug":"/app/STREAMLIT_QUICKSTART","permalink":"/docs/app/STREAMLIT_QUICKSTART","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/app/STREAMLIT_QUICKSTART.md","tags":[],"version":"current","frontMatter":{},"sidebar":"appSidebar","previous":{"title":"Streamlit Application Setup for Proxy","permalink":"/docs/app/STREAMLIT_SETUP"},"next":{"title":"Dynamic CORS Strategy for OCapistaine","permalink":"/docs/app/CORS_STRATEGY"}}');var i=n(4848),s=n(8453);const o={},l="Streamlit Quick Start - Fix 403 WebSocket Error",a={},c=[{value:"The Problem",id:"the-problem",level:2},{value:"Quick Fix (5 minutes)",id:"quick-fix-5-minutes",level:2},{value:"1. Create Streamlit Config",id:"1-create-streamlit-config",level:3},{value:"2. Restart Your App",id:"2-restart-your-app",level:3},{value:"3. Reload Browser",id:"3-reload-browser",level:3},{value:"Verify It Works",id:"verify-it-works",level:2},{value:"If Still Not Working",id:"if-still-not-working",level:2},{value:"Common Issues:",id:"common-issues",level:3}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"streamlit-quick-start---fix-403-websocket-error",children:"Streamlit Quick Start - Fix 403 WebSocket Error"})}),"\n",(0,i.jsx)(r.p,{children:'Quick fix for "You need to enable JavaScript" and 403 WebSocket errors.'}),"\n",(0,i.jsx)(r.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsx)(r.p,{children:"Your Streamlit app loads but doesn't work because:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["WebSocket connections (",(0,i.jsx)(r.code,{children:"/_stcore/stream"}),") return 403 Forbidden"]}),"\n",(0,i.jsxs)(r.li,{children:["Streamlit is blocking connections from ",(0,i.jsx)(r.code,{children:"ocapistaine.vaettir.locki.io"})]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"quick-fix-5-minutes",children:"Quick Fix (5 minutes)"}),"\n",(0,i.jsx)(r.h3,{id:"1-create-streamlit-config",children:"1. Create Streamlit Config"}),"\n",(0,i.jsx)(r.p,{children:"In your ocapistaine directory:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'cd ~/dev/ocapistaine\nmkdir -p .streamlit\ncat > .streamlit/config.toml << \'EOF\'\n[server]\nenableCORS = true\nenableXsrfProtection = false\nport = 8050\naddress = "0.0.0.0"\nheadless = true\nallowedOrigins = [\n    "https://ocapistaine.vaettir.locki.io",\n    "https://ocapistaine.ngrok-free.app",\n    "http://localhost:8050"\n]\n\n[browser]\ngatherUsageStats = false\nserverAddress = "ocapistaine.vaettir.locki.io"\nserverPort = 443\nEOF\n'})}),"\n",(0,i.jsx)(r.h3,{id:"2-restart-your-app",children:"2. Restart Your App"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# If running in Docker\ndocker compose restart\n\n# If running directly\n# Press Ctrl+C and restart:\nstreamlit run app.py\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-reload-browser",children:"3. Reload Browser"}),"\n",(0,i.jsxs)(r.p,{children:["Visit ",(0,i.jsx)(r.a,{href:"https://ocapistaine.vaettir.locki.io",children:"https://ocapistaine.vaettir.locki.io"})," and it should now work!"]}),"\n",(0,i.jsx)(r.h2,{id:"verify-it-works",children:"Verify It Works"}),"\n",(0,i.jsx)(r.p,{children:"Open browser DevTools (F12) \u2192 Network tab:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Look for ",(0,i.jsx)(r.code,{children:"/_stcore/stream"})," WebSocket"]}),"\n",(0,i.jsxs)(r.li,{children:["Should show status ",(0,i.jsx)(r.code,{children:"101 Switching Protocols"})," \u2705"]}),"\n",(0,i.jsxs)(r.li,{children:["NOT ",(0,i.jsx)(r.code,{children:"403 Forbidden"})," \u274c"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"if-still-not-working",children:"If Still Not Working"}),"\n",(0,i.jsxs)(r.p,{children:["See full troubleshooting guide: ",(0,i.jsx)(r.a,{href:"/docs/app/STREAMLIT_SETUP",children:"STREAMLIT_SETUP.md"})]}),"\n",(0,i.jsx)(r.h3,{id:"common-issues",children:"Common Issues:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Still 403?"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'# Check config is loaded\ncat .streamlit/config.toml\n\n# Try wildcard (testing only)\necho "allowedOrigins = [\\"*\\"]" >> .streamlit/config.toml\n'})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"App crashed?"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Check if running\ncurl http://localhost:8050/_stcore/health\n\n# Restart\ndocker compose restart\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"ngrok stopped?"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Restart ngrok\nngrok http 8050 --domain=ocapistaine.ngrok-free.app\n"})})]})}function p(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,r,n){n.d(r,{R:()=>o,x:()=>l});var t=n(6540);const i={},s=t.createContext(i);function o(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);