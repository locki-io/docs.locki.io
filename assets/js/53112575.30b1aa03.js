"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[6738],{8453(e,n,i){i.d(n,{R:()=>a,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},9866(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"app/scheduler/TASK_FLOW_DIAGRAM","title":"OCapistaine Scheduler Task Flow Diagram","description":"Last Updated: February 2026","source":"@site/docs/app/scheduler/TASK_FLOW_DIAGRAM.md","sourceDirName":"app/scheduler","slug":"/app/scheduler/TASK_FLOW_DIAGRAM","permalink":"/docs/app/scheduler/TASK_FLOW_DIAGRAM","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/app/scheduler/TASK_FLOW_DIAGRAM.md","tags":[],"version":"current","frontMatter":{},"sidebar":"appSidebar","previous":{"title":"OCapistaine Task Boilerplate Documentation","permalink":"/docs/app/scheduler/TASK_BOILERPLATE"}}');var s=i(4848),r=i(8453);const a={},o="OCapistaine Scheduler Task Flow Diagram",c={},l=[{value:"Complete Task Chain Flow",id:"complete-task-chain-flow",level:2},{value:"Standalone Scheduled Tasks",id:"standalone-scheduled-tasks",level:2},{value:"OCapistaine Workflow Decision Tree",id:"ocapistaine-workflow-decision-tree",level:2},{value:"Data Sources and Triggers",id:"data-sources-and-triggers",level:2},{value:"Priority 1: Live Contributions (GitHub)",id:"priority-1-live-contributions-github",level:3},{value:"Priority 2: Mockup Testing (Streamlit UI)",id:"priority-2-mockup-testing-streamlit-ui",level:3},{value:"Priority 3: Document Crawling (Scheduled)",id:"priority-3-document-crawling-scheduled",level:3},{value:"Task Implementation Status",id:"task-implementation-status",level:2},{value:"Cache Keys and Data Flow",id:"cache-keys-and-data-flow",level:2},{value:"Contribution Processing",id:"contribution-processing",level:3},{value:"Experiment Data",id:"experiment-data",level:3},{value:"Crawl Status",id:"crawl-status",level:3},{value:"Execution Timeline Example",id:"execution-timeline-example",level:2},{value:"Continuous Improvement Loop",id:"continuous-improvement-loop",level:2},{value:"Monitoring Points",id:"monitoring-points",level:2},{value:"Critical Success Indicators",id:"critical-success-indicators",level:3},{value:"Key Redis Keys to Monitor",id:"key-redis-keys-to-monitor",level:3},{value:"Performance Metrics",id:"performance-metrics",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ocapistaine-scheduler-task-flow-diagram",children:"OCapistaine Scheduler Task Flow Diagram"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Last Updated"}),": February 2026\n",(0,s.jsx)(n.strong,{children:"Status"}),": Initial implementation - Core tasks active"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"complete-task-chain-flow",children:"Complete Task Chain Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SCHEDULER ORCHESTRATION                                         \u2502\n\u2502 Runs every 7 minutes (6 AM - 11 PM)                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                            \u2502\n                            \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1. task_contributions_analysis                                  \u2502\n\u2502    Validate citizen contributions from GitHub/Vaettir           \u2502\n\u2502    - Fetch from audierne2026/participons                        \u2502\n\u2502    - Run Forseti validation                                     \u2502\n\u2502    - Log results to Opik                                        \u2502\n\u2502    Dependencies: None                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                            \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502                           \u2502\n              \u25bc                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 (Future) task_rag_indexing   \u2502  \u2502 (Future) task_mockup_gen     \u2502\n\u2502 Index validated contributions\u2502  \u2502 Generate test scenarios      \u2502\n\u2502 into vector store            \u2502  \u2502 from validated contributions \u2502\n\u2502 Dependencies: [contributions]\u2502  \u2502 Dependencies: [contributions]\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"standalone-scheduled-tasks",children:"Standalone Scheduled Tasks"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 task_firecrawl                                                  \u2502\n\u2502 Runs: Daily at 3 AM                                             \u2502\n\u2502 Crawl municipal documents from configured sources               \u2502\n\u2502 - mairie_arretes (~4010 documents)                              \u2502\n\u2502 - mairie_deliberations                                          \u2502\n\u2502 - commission_controle                                           \u2502\n\u2502 Dependencies: None (standalone cron job)                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 task_opik_experiment                                            \u2502\n\u2502 Runs: Daily at 5 AM                                             \u2502\n\u2502 Run LLM evaluation experiments                                  \u2502\n\u2502 - Forseti validation accuracy                                   \u2502\n\u2502 - Category classification precision/recall                      \u2502\n\u2502 - Wording correction quality                                    \u2502\n\u2502 Dependencies: None (standalone cron job)                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ocapistaine-workflow-decision-tree",children:"OCapistaine Workflow Decision Tree"}),"\n",(0,s.jsx)(n.p,{children:"The scheduler implements a priority-based workflow for continuous improvement:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502 Start Daily Workflow    \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502 Check GitHub Issues     \u2502\n                    \u2502 (audierne2026/participons)\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502                       \u2502\n            Has new issues?           No new issues\n                    \u2502                       \u2502\n                    \u25bc                       \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 task_contributions \u2502   \u2502 Check Mockup Queue\u2502\n        \u2502 _analysis          \u2502   \u2502 (Redis)           \u2502\n        \u2502                    \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502 \u2022 Forseti validate \u2502             \u2502\n        \u2502 \u2022 Categorize       \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 \u2022 Log to Opik      \u2502   \u2502                   \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Has mockups?   No mockups\n                 \u2502                   \u2502               \u2502\n                 \u25bc                   \u25bc               \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 Update experiment \u2502 \u2502 task_mockup   \u2502 \u2502 task_firecrawl\u2502\n        \u2502 dataset           \u2502 \u2502 _experiment   \u2502 \u2502 (if scheduled)\u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502               \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502 \u2022 Run Opik    \u2502\n                              \u2502   evaluation  \u2502\n                              \u2502 \u2022 Try new     \u2502\n                              \u2502   prompts     \u2502\n                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"data-sources-and-triggers",children:"Data Sources and Triggers"}),"\n",(0,s.jsx)(n.h3,{id:"priority-1-live-contributions-github",children:"Priority 1: Live Contributions (GitHub)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"audierne2026/participons repository\n        \u2502\n        \u2502 New issue created\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 N8N Webhook \u2192 Redis Queue \u2192 task_contributions_analysis         \u2502\n\u2502                                                                 \u2502\n\u2502 OR: Periodic polling via orchestrate_task_chain (every 7 min)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h3,{id:"priority-2-mockup-testing-streamlit-ui",children:"Priority 2: Mockup Testing (Streamlit UI)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"app/front.py \u2192 Mockup Tab\n        \u2502\n        \u2502 User creates test contribution\n        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Streamlit \u2192 ForsetiAgent.validate() \u2192 Log to Opik               \u2502\n\u2502                                                                 \u2502\n\u2502 If interesting case: Save to Redis \u2192 task_opik_experiment       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h3,{id:"priority-3-document-crawling-scheduled",children:"Priority 3: Document Crawling (Scheduled)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 task_firecrawl (3 AM daily)                                     \u2502\n\u2502                                                                 \u2502\n\u2502 Sources:                                                        \u2502\n\u2502 \u251c\u2500\u2500 mairie_arretes (audierne.bzh/publications-arretes/)         \u2502\n\u2502 \u251c\u2500\u2500 mairie_deliberations (audierne.bzh/deliberations-...)       \u2502\n\u2502 \u2514\u2500\u2500 commission_controle (audierne.bzh/documentheque/...)        \u2502\n\u2502                                                                 \u2502\n\u2502 Output: ext_data/{source}/*.md                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"task-implementation-status",children:"Task Implementation Status"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Task"}),(0,s.jsx)(n.th,{children:"Uses Workflows?"}),(0,s.jsx)(n.th,{children:"Status"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"task_contributions_analysis"})}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\u2705 Active"}),(0,s.jsx)(n.td,{children:"Validate GitHub contributions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"task_opik_experiment"})}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\u2705 Active"}),(0,s.jsx)(n.td,{children:"Run LLM evaluations"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"task_firecrawl"})}),(0,s.jsx)(n.td,{children:"\u274c No (crawler)"}),(0,s.jsx)(n.td,{children:"\u2705 Active"}),(0,s.jsx)(n.td,{children:"Crawl municipal documents"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"task_rag_indexing"}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\ud83d\udd34 Planned"}),(0,s.jsx)(n.td,{children:"Index to vector store"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"task_mockup_experiment"}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\ud83d\udd34 Planned"}),(0,s.jsx)(n.td,{children:"Process mockup test cases"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"task_prompt_optimization"}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\ud83d\udd34 Planned"}),(0,s.jsx)(n.td,{children:"Run Opik optimization"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"cache-keys-and-data-flow",children:"Cache Keys and Data Flow"}),"\n",(0,s.jsx)(n.h3,{id:"contribution-processing",children:"Contribution Processing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GitHub Issue\n    \u2502\n    \u25bc\ntask_contributions_analysis\n    \u2502\n    \u251c\u2500\u2500 Redis: contribution:{issue_id}\n    \u2502   \u2514\u2500\u2500 { title, body, category, validation_result, timestamp }\n    \u2502\n    \u251c\u2500\u2500 Redis: contributions:validated:{date}\n    \u2502   \u2514\u2500\u2500 List of validated issue IDs\n    \u2502\n    \u2514\u2500\u2500 Opik: forseti_validation trace\n        \u2514\u2500\u2500 { input, output, latency, model, tokens }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"experiment-data",children:"Experiment Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"task_opik_experiment\n    \u2502\n    \u251c\u2500\u2500 Redis: experiment:latest\n    \u2502   \u2514\u2500\u2500 { experiment_id, date, metrics, status }\n    \u2502\n    \u2514\u2500\u2500 Opik: experiment traces\n        \u2514\u2500\u2500 { dataset, evaluations, scores }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"crawl-status",children:"Crawl Status"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"task_firecrawl\n    \u2502\n    \u251c\u2500\u2500 Redis: crawl:{source}\n    \u2502   \u2514\u2500\u2500 { last_crawl, documents, status }\n    \u2502\n    \u2514\u2500\u2500 Filesystem: ext_data/{source}/\n        \u2514\u2500\u2500 *.md, *.html, *_metadata.json\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"execution-timeline-example",children:"Execution Timeline Example"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Typical Daily Run:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"03:00:00 - task_firecrawl starts (cron)\n           \u2514\u2500\u2500 Crawl municipal documents\n03:30:00 - task_firecrawl completes (estimated)\n\n05:00:00 - task_opik_experiment starts (cron)\n           \u2514\u2500\u2500 Run daily LLM evaluations\n05:15:00 - task_opik_experiment completes (estimated)\n\n06:00:00 - orchestrate_task_chain starts (every 7 min)\n06:00:01 - task_contributions_analysis starts\n           \u2514\u2500\u2500 Check GitHub for new issues\n           \u2514\u2500\u2500 Validate with Forseti\n           \u2514\u2500\u2500 Log to Opik\n06:02:00 - task_contributions_analysis completes\n06:07:00 - orchestrate_task_chain runs (skips - already completed)\n...\n23:00:00 - orchestrate_task_chain stops (outside active hours)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"continuous-improvement-loop",children:"Continuous Improvement Loop"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    CONTINUOUS IMPROVEMENT                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502 1. COLLECT   \u2502 \u2190 Live contributions from citizens\n     \u2502    Data      \u2502 \u2190 Mockup tests from admin\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2190 Crawled documents\n            \u2502\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502 2. VALIDATE  \u2502 \u2190 Forseti agent validation\n     \u2502    & Log     \u2502 \u2190 Opik tracing\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502 3. ANALYZE   \u2502 \u2190 task_opik_experiment\n     \u2502    Results   \u2502 \u2190 Accuracy metrics\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2190 Error patterns\n            \u2502\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502 4. OPTIMIZE  \u2502 \u2190 (Future) Opik Optimizer\n     \u2502    Prompts   \u2502 \u2190 A/B testing\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502\n            \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502 5. DEPLOY    \u2502 \u2190 Update prompt registry\n     \u2502    & Monitor \u2502 \u2190 Monitor production\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                                     \u2502\n                                              (Loop back)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-points",children:"Monitoring Points"}),"\n",(0,s.jsx)(n.h3,{id:"critical-success-indicators",children:"Critical Success Indicators"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"task_contributions_analysis"})," validates new contributions daily"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"task_opik_experiment"})," runs evaluations without errors"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"task_firecrawl"})," crawls documents as scheduled"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"No task deadlocks"})," or circular dependencies"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"key-redis-keys-to-monitor",children:"Key Redis Keys to Monitor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Scheduler locks (db=6)\nredis-cli -n 6 KEYS "lock:*"\nredis-cli -n 6 KEYS "success:*"\n\n# Application data (db=5)\nredis-cli -n 5 KEYS "contribution:*"\nredis-cli -n 5 KEYS "crawl:*"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"performance-metrics",children:"Performance Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Task execution times"})," (each task should complete within expected time)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Redis memory usage"})," (should remain stable)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error rates"})," (should be <5% per task)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validation accuracy"})," (tracked in Opik)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/app/scheduler/",children:"README.md"})," - Scheduler architecture overview"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/app/scheduler/USAGE_EXAMPLES",children:"USAGE_EXAMPLES.md"})," - How-to guide"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/app/scheduler/TASK_BOILERPLATE",children:"TASK_BOILERPLATE.md"})," - Task implementation guide"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Last Updated"}),": February 2026\n",(0,s.jsx)(n.strong,{children:"Status"}),": Initial implementation - Core tasks active"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);