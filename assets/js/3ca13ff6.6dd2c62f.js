"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[7128],{8453(e,n,s){s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},8961(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"orchestration/SETUP","title":"Vaettir Setup Guide","description":"Complete installation and configuration instructions for local development and production deployment.","source":"@site/docs/orchestration/SETUP.md","sourceDirName":"orchestration","slug":"/orchestration/SETUP","permalink":"/docs/orchestration/SETUP","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/orchestration/SETUP.md","tags":[],"version":"current","frontMatter":{}}');var r=s(4848),t=s(8453);const o={},l="Vaettir Setup Guide",c={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Required",id:"required",level:3},{value:"Optional",id:"optional",level:3},{value:"Installation",id:"installation",level:2},{value:"1. Clone Repository",id:"1-clone-repository",level:3},{value:"2. Choose Your Environment",id:"2-choose-your-environment",level:3},{value:"Local Development Setup",id:"local-development-setup",level:2},{value:"Step 1: Environment Configuration",id:"step-1-environment-configuration",level:3},{value:"Step 2: Port Exposure (Automatic)",id:"step-2-port-exposure-automatic",level:3},{value:"Step 3: Start Services",id:"step-3-start-services",level:3},{value:"Step 4: Access n8n",id:"step-4-access-n8n",level:3},{value:"Step 5: Basic Auth (Optional)",id:"step-5-basic-auth-optional",level:3},{value:"Verify Installation",id:"verify-installation",level:3},{value:"Test Python Execution",id:"test-python-execution",level:3},{value:"Production Server Setup",id:"production-server-setup",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Step 1: Server Preparation",id:"step-1-server-preparation",level:3},{value:"Step 2: Clone Repository",id:"step-2-clone-repository",level:3},{value:"Step 3: Environment Configuration",id:"step-3-environment-configuration",level:3},{value:"Step 4: Ensure Clean Production Config",id:"step-4-ensure-clean-production-config",level:3},{value:"Step 5: Start with Production Profile",id:"step-5-start-with-production-profile",level:3},{value:"Step 6: Verify HTTPS",id:"step-6-verify-https",level:3},{value:"Step 7: Initial Setup",id:"step-7-initial-setup",level:3},{value:"Production Checklist",id:"production-checklist",level:3},{value:"Optional: Opik Observability",id:"optional-opik-observability",level:2},{value:"Step 1: Get Opik API Key",id:"step-1-get-opik-api-key",level:3},{value:"Step 2: Configure Environment",id:"step-2-configure-environment",level:3},{value:"Step 3: Restart",id:"step-3-restart",level:3},{value:"Backup and Restore",id:"backup-and-restore",level:2},{value:"Backup",id:"backup",level:3},{value:"Restore",id:"restore",level:3},{value:"Automated Backups",id:"automated-backups",level:3},{value:"Updating Vaettir",id:"updating-vaettir",level:2},{value:"Development",id:"development",level:3},{value:"Production",id:"production",level:3},{value:"Common Configurations",id:"common-configurations",level:2},{value:"Custom Port (Local)",id:"custom-port-local",level:3},{value:"Multiple Domains (Production)",id:"multiple-domains-production",level:3},{value:"Enable Workers (Scaling)",id:"enable-workers-scaling",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Security Notes",id:"security-notes",level:2},{value:"Production Security Checklist",id:"production-security-checklist",level:3},{value:"Network Security",id:"network-security",level:3},{value:"SSL/TLS",id:"ssltls",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"vaettir-setup-guide",children:"Vaettir Setup Guide"})}),"\n",(0,r.jsx)(n.p,{children:"Complete installation and configuration instructions for local development and production deployment."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.h3,{id:"required",children:"Required"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker Desktop (Mac/Windows) or Docker Engine (Linux)"}),"\n",(0,r.jsx)(n.li,{children:"Docker Compose v2+"}),"\n",(0,r.jsx)(n.li,{children:"Git"}),"\n",(0,r.jsx)(n.li,{children:"Text editor"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"optional",children:"Optional"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ngrok account (for development with local services)"}),"\n",(0,r.jsx)(n.li,{children:"Opik account (for observability)"}),"\n",(0,r.jsx)(n.li,{children:"Domain name (for production HTTPS)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.h3,{id:"1-clone-repository",children:"1. Clone Repository"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone <repository-url>\ncd vaettir\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-choose-your-environment",children:"2. Choose Your Environment"}),"\n",(0,r.jsx)(n.p,{children:"You have two main deployment scenarios:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Local Development"})," - For building/testing workflows on your machine"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Production Server"})," - For running vaettir on a public server"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"local-development-setup",children:"Local Development Setup"}),"\n",(0,r.jsx)(n.p,{children:"Perfect for workflow development and testing."}),"\n",(0,r.jsx)(n.h3,{id:"step-1-environment-configuration",children:"Step 1: Environment Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Copy the development template\ncp .env.development.example .env\n\n# Edit the file (optional - defaults work fine)\nnano .env\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key variables"})," (defaults are fine for local):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"N8N_HOST=localhost\nN8N_PORT=5678\nN8N_PROTOCOL=http\nN8N_LOG_LEVEL=debug\n\n# Database\nPOSTGRES_PASSWORD=dev_password_not_secure\n\n# Task Runner\nN8N_RUNNERS_AUTH_TOKEN=dev_runner_token_local\n\n# Encryption (change if you want)\nN8N_ENCRYPTION_KEY=dev_super_secret_change_me_still\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-port-exposure-automatic",children:"Step 2: Port Exposure (Automatic)"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"docker-compose.override.yml"})," file automatically exposes port 5678:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# This file is gitignored and auto-merged\nservices:\n  n8n:\n    ports:\n      - "${N8N_PORT:-5678}:5678"\n'})}),"\n",(0,r.jsx)(n.p,{children:"If it doesn't exist, create it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cat > docker-compose.override.yml << 'EOF'\nservices:\n  n8n:\n    ports:\n      - \"${N8N_PORT:-5678}:5678\"\nEOF\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-start-services",children:"Step 3: Start Services"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build and start\ndocker compose up -d --build\n\n# Check status\ndocker compose ps\n\n# View logs\ndocker compose logs -f n8n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-access-n8n",children:"Step 4: Access n8n"}),"\n",(0,r.jsxs)(n.p,{children:["Open your browser to: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"http://localhost:5678",children:"http://localhost:5678"})})]}),"\n",(0,r.jsx)(n.p,{children:"On first access:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create owner account (email + password)"}),"\n",(0,r.jsx)(n.li,{children:"This becomes your admin user"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-basic-auth-optional",children:"Step 5: Basic Auth (Optional)"}),"\n",(0,r.jsxs)(n.p,{children:["If you enabled basic auth in ",(0,r.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Username: ",(0,r.jsx)(n.code,{children:"dev"})]}),"\n",(0,r.jsxs)(n.li,{children:["Password: ",(0,r.jsx)(n.code,{children:"dev"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Then proceed to create your owner account."}),"\n",(0,r.jsx)(n.h3,{id:"verify-installation",children:"Verify Installation"}),"\n",(0,r.jsx)(n.p,{children:"Check all services are healthy:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose ps\n"})}),"\n",(0,r.jsx)(n.p,{children:"Expected output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"NAME                        STATUS\nvaettir-n8n-1               Up (healthy)\nvaettir-n8n-task-runner-1   Up\nvaettir-postgres-1          Up (healthy)\nvaettir-redis-1             Up (healthy)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"test-python-execution",children:"Test Python Execution"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create new workflow in n8n"}),"\n",(0,r.jsx)(n.li,{children:'Add "Code" node'}),"\n",(0,r.jsx)(n.li,{children:'Select "Run Once for All Items"'}),"\n",(0,r.jsx)(n.li,{children:'Choose "Python" as language'}),"\n",(0,r.jsx)(n.li,{children:"Test code:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import json\nimport re\n\ndata = {\n    "message": "Python task runner works!",\n    "modules": ["json", "re"]\n}\n\nreturn [{"json": data}]\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsx)(n.li,{children:'Execute - should succeed without "Security violations"'}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"production-server-setup",children:"Production Server Setup"}),"\n",(0,r.jsx)(n.p,{children:"For deploying to a public server with HTTPS."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Linux server (Ubuntu/Debian recommended)"}),"\n",(0,r.jsx)(n.li,{children:"Domain name pointing to server IP"}),"\n",(0,r.jsx)(n.li,{children:"Ports 80 and 443 open"}),"\n",(0,r.jsx)(n.li,{children:"SSH access to server"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-1-server-preparation",children:"Step 1: Server Preparation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# SSH to your server\nssh user@your-server\n\n# Update system\nsudo apt update && sudo apt upgrade -y\n\n# Install Docker\ncurl -fsSL https://get.docker.com | sh\nsudo usermod -aG docker $USER\n\n# Install Docker Compose (if not included)\nsudo apt install docker-compose-plugin\n\n# Log out and back in for group changes\nexit\nssh user@your-server\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-clone-repository",children:"Step 2: Clone Repository"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create project directory\nmkdir -p ~/vaettir\ncd ~/vaettir\n\n# Clone (or upload via git)\ngit clone <repository-url> .\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-environment-configuration",children:"Step 3: Environment Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Copy production template\ncp .env.production.example .env\n\n# Edit configuration\nnano .env\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Critical variables to set"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Domain (MUST match your DNS)\nN8N_HOST=vaettir.locki.io\nN8N_PROTOCOL=https\n\n# Security - CHANGE THESE!\nPOSTGRES_PASSWORD=<generate-strong-password>\nN8N_ENCRYPTION_KEY=<generate-long-random-string>\nN8N_RUNNERS_AUTH_TOKEN=<generate-random-token>\n\n# Traefik (for Let's Encrypt)\nTRAEFIK_EMAIL=your-email@domain.com\n\n# Auth (optional but recommended)\nN8N_BASIC_AUTH_ACTIVE=true\nN8N_BASIC_AUTH_USER=admin\nN8N_BASIC_AUTH_PASSWORD=<strong-password>\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Generate secure values"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Encryption key (32+ chars)\nopenssl rand -hex 32\n\n# Auth token\nopenssl rand -base64 32\n\n# Password\nopenssl rand -base64 16\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-ensure-clean-production-config",children:"Step 4: Ensure Clean Production Config"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"IMPORTANT"}),": Make sure ",(0,r.jsx)(n.code,{children:"docker-compose.override.yml"})," does NOT exist on server:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check if it exists\nls -la docker-compose.override.yml\n\n# If it exists, delete it\nrm docker-compose.override.yml\n"})}),"\n",(0,r.jsx)(n.p,{children:"This file should only exist on local dev machines (it's gitignored)."}),"\n",(0,r.jsx)(n.h3,{id:"step-5-start-with-production-profile",children:"Step 5: Start with Production Profile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build and start with production profile\ndocker compose --profile production up -d --build\n\n# Check status\ndocker compose ps\n\n# Watch logs\ndocker compose logs -f\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-6-verify-https",children:"Step 6: Verify HTTPS"}),"\n",(0,r.jsx)(n.p,{children:"Wait 1-2 minutes for Let's Encrypt certificate:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check Traefik logs\ndocker compose logs traefik\n\n# Should see: "Certificate obtained for domain vaettir.locki.io"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Access: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://vaettir.locki.io",children:"https://vaettir.locki.io"})})]}),"\n",(0,r.jsx)(n.h3,{id:"step-7-initial-setup",children:"Step 7: Initial Setup"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Enter basic auth credentials (if enabled)"}),"\n",(0,r.jsx)(n.li,{children:"Create owner account (first user)"}),"\n",(0,r.jsx)(n.li,{children:"Configure n8n settings"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","DNS points to server IP"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Ports 80/443 open in firewall"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Strong passwords set in ",(0,r.jsx)(n.code,{children:".env"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.code,{children:".env"})," file has restricted permissions: ",(0,r.jsx)(n.code,{children:"chmod 600 .env"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.code,{children:"docker-compose.override.yml"})," does NOT exist"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","HTTPS certificate obtained successfully"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Backups configured (see below)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"optional-opik-observability",children:"Optional: Opik Observability"}),"\n",(0,r.jsx)(n.p,{children:"Enable LLM tracing and monitoring."}),"\n",(0,r.jsx)(n.h3,{id:"step-1-get-opik-api-key",children:"Step 1: Get Opik API Key"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Sign up at ",(0,r.jsx)(n.a,{href:"https://www.comet.com/signup?product=opik",children:"https://www.comet.com/signup?product=opik"})]}),"\n",(0,r.jsx)(n.li,{children:"Create workspace"}),"\n",(0,r.jsx)(n.li,{children:"Get API key from settings"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-configure-environment",children:"Step 2: Configure Environment"}),"\n",(0,r.jsxs)(n.p,{children:["Add to ",(0,r.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Opik Observability\nOPIK_API_KEY=your_api_key_here\nOPIK_WORKSPACE=default\nOTEL_EXPORTER_OTLP_ENDPOINT=https://www.comet.com/opik/api/v1/private/otel\nOTEL_EXPORTER_OTLP_HEADERS=Authorization=${OPIK_API_KEY},Comet-Workspace=${OPIK_WORKSPACE}\nN8N_OTEL_SERVICE_NAME=vaettir-n8n\nEXTERNAL_HOOK_FILES=/usr/local/lib/node_modules/n8n-observability/dist/hooks.cjs\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-restart",children:"Step 3: Restart"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose restart n8n\n"})}),"\n",(0,r.jsx)(n.p,{children:"Executions will now be traced in Opik dashboard."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Recommendation"}),": Only enable in production, not local dev."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"backup-and-restore",children:"Backup and Restore"}),"\n",(0,r.jsx)(n.h3,{id:"backup",children:"Backup"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Database backup"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create backup directory\nmkdir -p ~/backups\n\n# Backup PostgreSQL\ndocker compose exec postgres pg_dump -U n8n n8n > ~/backups/n8n-$(date +%Y%m%d).sql\n\n# Backup volumes\ndocker run --rm \\\n  -v vaettir_postgres_data:/data \\\n  -v ~/backups:/backup \\\n  alpine tar czf /backup/postgres-data-$(date +%Y%m%d).tar.gz /data\n\ndocker run --rm \\\n  -v vaettir_n8n_data:/data \\\n  -v ~/backups:/backup \\\n  alpine tar czf /backup/n8n-data-$(date +%Y%m%d).tar.gz /data\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Environment backup"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp .env ~/backups/.env.backup-$(date +%Y%m%d)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"restore",children:"Restore"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Database restore"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Stop services\ndocker compose down\n\n# Restore from SQL dump\ndocker compose up -d postgres\ndocker compose exec -T postgres psql -U n8n n8n < ~/backups/n8n-YYYYMMDD.sql\n\n# Restart all services\ndocker compose --profile production up -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"automated-backups",children:"Automated Backups"}),"\n",(0,r.jsx)(n.p,{children:"Create cron job:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"crontab -e\n"})}),"\n",(0,r.jsx)(n.p,{children:"Add:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cron",children:'# Daily backup at 2 AM\n0 2 * * * cd ~/vaettir && docker compose exec postgres pg_dump -U n8n n8n > ~/backups/n8n-$(date +\\%Y\\%m\\%d).sql\n\n# Keep only last 7 days\n0 3 * * * find ~/backups -name "n8n-*.sql" -mtime +7 -delete\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"updating-vaettir",children:"Updating Vaettir"}),"\n",(0,r.jsx)(n.h3,{id:"development",children:"Development"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Pull latest changes\ngit pull\n\n# Rebuild and restart\ndocker compose down\ndocker compose up -d --build\n"})}),"\n",(0,r.jsx)(n.h3,{id:"production",children:"Production"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Pull changes\ncd ~/vaettir\ngit pull\n\n# Backup first!\ndocker compose exec postgres pg_dump -U n8n n8n > ~/backups/pre-update-$(date +%Y%m%d).sql\n\n# Update\ndocker compose --profile production down\ndocker compose --profile production up -d --build\n\n# Check logs\ndocker compose logs -f n8n\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-configurations",children:"Common Configurations"}),"\n",(0,r.jsx)(n.h3,{id:"custom-port-local",children:"Custom Port (Local)"}),"\n",(0,r.jsxs)(n.p,{children:["Edit ",(0,r.jsx)(n.code,{children:"docker-compose.override.yml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'services:\n  n8n:\n    ports:\n      - "8080:5678"  # Access via localhost:8080\n'})}),"\n",(0,r.jsx)(n.h3,{id:"multiple-domains-production",children:"Multiple Domains (Production)"}),"\n",(0,r.jsxs)(n.p,{children:["Edit Traefik labels in ",(0,r.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'labels:\n  - "traefik.http.routers.n8n.rule=Host(`vaettir.locki.io`) || Host(`n8n.example.com`)"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"enable-workers-scaling",children:"Enable Workers (Scaling)"}),"\n",(0,r.jsxs)(n.p,{children:["Uncomment in ",(0,r.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"n8n-worker:\n  image: n8nio/n8n:latest\n  command: n8n worker\n  # ... rest of config\n  deploy:\n    replicas: 2  # Number of workers\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose --profile production up -d --scale n8n-worker=2\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/docs/orchestration/TROUBLESHOOTING",children:"TROUBLESHOOTING.md"})," for common issues and solutions."]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/orchestration/ARCHITECTURE",children:"Architecture Overview"})," - Understand how it works"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/orchestration/DEVELOPMENT",children:"Development Workflow"})," - Set up local service integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/orchestration/WORKFLOWS",children:"Workflow Best Practices"})," - Create effective workflows"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/orchestration/REFERENCES",children:"External Resources"})," - Links to n8n documentation"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security-notes",children:"Security Notes"}),"\n",(0,r.jsx)(n.h3,{id:"production-security-checklist",children:"Production Security Checklist"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use strong, unique passwords"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Restrict ",(0,r.jsx)(n.code,{children:".env"})," file permissions: ",(0,r.jsx)(n.code,{children:"chmod 600 .env"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable basic auth or configure SSO"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Keep Docker and images updated"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use firewall (UFW/iptables)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Regular backups"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor logs for suspicious activity"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Rotate API keys periodically"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use webhook secrets for external integrations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-security",children:"Network Security"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install UFW (Ubuntu)\nsudo apt install ufw\n\n# Allow SSH\nsudo ufw allow 22/tcp\n\n# Allow HTTP/HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Enable firewall\nsudo ufw enable\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ssltls",children:"SSL/TLS"}),"\n",(0,r.jsx)(n.p,{children:"Traefik handles this automatically via Let's Encrypt. Certificates are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Stored in ",(0,r.jsx)(n.code,{children:"traefik_data"})," volume"]}),"\n",(0,r.jsx)(n.li,{children:"Auto-renewed before expiration"}),"\n",(0,r.jsx)(n.li,{children:"Grade A SSL by default"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"To verify:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check certificate\necho | openssl s_client -connect vaettir.locki.io:443 2>/dev/null | openssl x509 -noout -dates\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);