"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[7439],{1783(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"app/README","title":"OCapistaine Application Guide","description":"Consolidated documentation for the OCapistaine application stack","source":"@site/docs/app/README.md","sourceDirName":"app","slug":"/app/","permalink":"/fr/docs/app/","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/app/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"appSidebar","next":{"title":"OCapistaine Application Guide","permalink":"/fr/docs/app/"}}');var s=r(4848),t=r(8453);const c={},a="OCapistaine Application Guide",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Environment Setup",id:"1-environment-setup",level:3},{value:"2. Run the Application",id:"2-run-the-application",level:3},{value:"3. Run Document Crawlers",id:"3-run-document-crawlers",level:3},{value:"Document Crawling (Firecrawl)",id:"document-crawling-firecrawl",level:2},{value:"Data Sources",id:"data-sources",level:3},{value:"Commands",id:"commands",level:3},{value:"Output Structure",id:"output-structure",level:3},{value:"PDF Processing",id:"pdf-processing",level:3},{value:"Opik Integration (Dual Tracing)",id:"opik-integration-dual-tracing",level:2},{value:"Why Dual Tracing?",id:"why-dual-tracing",level:3},{value:"App-Side Configuration",id:"app-side-configuration",level:3},{value:"App-Side Usage",id:"app-side-usage",level:3},{value:"Vaettir-Side Integration",id:"vaettir-side-integration",level:3},{value:"Unified Dashboard",id:"unified-dashboard",level:3},{value:"Mockup Testing System",id:"mockup-testing-system",level:2},{value:"Generate Test Contributions",id:"generate-test-contributions",level:3},{value:"Run Validation Tests",id:"run-validation-tests",level:3},{value:"Export to Opik",id:"export-to-opik",level:3},{value:"Internationalization (i18n)",id:"internationalization-i18n",level:2},{value:"Usage",id:"usage",level:3},{value:"Adding Translations",id:"adding-translations",level:3},{value:"Logging System",id:"logging-system",level:2},{value:"Domains",id:"domains",level:3},{value:"Usage",id:"usage-1",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Running in Production",id:"running-in-production",level:2},{value:"Docker Compose",id:"docker-compose",level:3},{value:"ngrok (Demo/Hackathon)",id:"ngrok-demohackathon",level:3},{value:"License Split",id:"license-split",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Firecrawl Issues",id:"firecrawl-issues",level:3},{value:"Redis Connection",id:"redis-connection",level:3},{value:"Streamlit Port Busy",id:"streamlit-port-busy",level:3},{value:"Migration Notes",id:"migration-notes",level:2},{value:"From <code>src/</code> to <code>app/</code>",id:"from-src-to-app",level:3},{value:"Opik Changes",id:"opik-changes",level:3}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ocapistaine-application-guide",children:"OCapistaine Application Guide"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Consolidated documentation for the OCapistaine application stack"})}),"\n",(0,s.jsxs)(n.p,{children:["This guide replaces the deprecated ",(0,s.jsx)(n.code,{children:"ARCHITECTURE.md"}),", ",(0,s.jsx)(n.code,{children:"FIRECRAWL_GUIDE.md"}),", and ",(0,s.jsx)(n.code,{children:"QUICKSTART.md"})," from ",(0,s.jsx)(n.code,{children:"docs/docs/"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"OCapistaine is an AI-powered civic transparency system for local democracy in Audierne, France. It processes municipal documents and citizen contributions through a layered architecture."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Components:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Streamlit UI"})," - Citizen-facing interface (",(0,s.jsx)(n.code,{children:"app/front.py"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FastAPI"})," - REST API for integrations (",(0,s.jsx)(n.code,{children:"app/main.py"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Forseti Agent"})," - Charter validation (",(0,s.jsx)(n.code,{children:"app/agents/forseti/"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mockup System"})," - Testing framework (",(0,s.jsx)(n.code,{children:"app/mockup/"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Crawlers"})," - Document acquisition (",(0,s.jsx)(n.code,{children:"src/"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         PRESENTATION LAYER                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502   Streamlit UI  \u2502  \u2502   FastAPI REST  \u2502  \u2502   N8N (Vaettir repo)    \u2502  \u2502\n\u2502  \u2502   (front.py)    \u2502  \u2502   (main.py)     \u2502  \u2502   FB / Email / Chat     \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502                    \u2502                     \u2502\n            \u25bc                    \u25bc                     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         APPLICATION LAYER                                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  Providers  \u2502  \u2502   Logging   \u2502  \u2502    i18n     \u2502  \u2502    Services     \u2502 \u2502\n\u2502  \u2502  (LLM APIs) \u2502  \u2502   System    \u2502  \u2502  (EN/FR)    \u2502  \u2502  (orchestration)\u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502                    \u2502                     \u2502\n            \u25bc                    \u25bc                     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         BUSINESS LOGIC LAYER                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502         AGENTS (ELv2)         \u2502  \u2502     PROCESSORS (Apache 2.0)     \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502 \u2502\n\u2502  \u2502  \u2502 Forseti (Charter)       \u2502  \u2502  \u2502  \u2502 Mockup Processor          \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502 RAG Agent (pending)     \u2502  \u2502  \u2502  \u2502 (validation testing)      \u2502  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502                    \u2502                     \u2502\n            \u25bc                    \u25bc                     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         DATA & EXTERNAL SERVICES                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502   Redis     \u2502  \u2502  Firecrawl  \u2502  \u2502    Opik     \u2502  \u2502   Vaettir/N8N   \u2502 \u2502\n\u2502  \u2502   Cache     \u2502  \u2502   (crawl)   \u2502  \u2502  (tracing)  \u2502  \u2502   (workflows)   \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"app/                           # Main application (replaces src/ for app code)\n\u251c\u2500\u2500 front.py                   # Streamlit UI entry point\n\u251c\u2500\u2500 sidebar.py                 # Streamlit sidebar\n\u251c\u2500\u2500 main.py                    # FastAPI entry point\n\u251c\u2500\u2500 i18n.py                    # Internationalization (EN/FR)\n\u2502\n\u251c\u2500\u2500 agents/                    # AI Agents (ELv2 licensed)\n\u2502   \u251c\u2500\u2500 forseti/               # Charter validation agent\n\u2502   \u2502   \u251c\u2500\u2500 agent.py\n\u2502   \u2502   \u251c\u2500\u2500 features/\n\u2502   \u2502   \u2514\u2500\u2500 prompts.py\n\u2502   \u2514\u2500\u2500 tracing/               # Opik tracing integration\n\u2502       \u2514\u2500\u2500 opik.py\n\u2502\n\u251c\u2500\u2500 processors/                # Data processors (Apache 2.0)\n\u2502   \u2514\u2500\u2500 mockup_processor.py    # Charter testing workflow\n\u2502\n\u251c\u2500\u2500 mockup/                    # Testing framework (Apache 2.0)\n\u2502   \u251c\u2500\u2500 generator.py           # Contribution generation\n\u2502   \u251c\u2500\u2500 levenshtein.py         # Text mutations\n\u2502   \u251c\u2500\u2500 llm_mutations.py       # LLM-based mutations\n\u2502   \u251c\u2500\u2500 storage.py             # Redis persistence\n\u2502   \u251c\u2500\u2500 dataset.py             # Opik export\n\u2502   \u2514\u2500\u2500 batch_view.py          # Streamlit UI\n\u2502\n\u251c\u2500\u2500 providers/                 # LLM providers (Apache 2.0)\n\u2502   \u251c\u2500\u2500 base.py\n\u2502   \u251c\u2500\u2500 gemini.py\n\u2502   \u251c\u2500\u2500 mistral.py\n\u2502   \u251c\u2500\u2500 claude.py\n\u2502   \u2514\u2500\u2500 ollama.py\n\u2502\n\u251c\u2500\u2500 logging/                   # Domain logging (Apache 2.0)\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u2514\u2500\u2500 domains.py\n\u2502\n\u2514\u2500\u2500 translations/              # i18n JSON files\n    \u251c\u2500\u2500 en.json\n    \u2514\u2500\u2500 fr.json\n\nsrc/                           # Crawling utilities (Apache 2.0)\n\u251c\u2500\u2500 config.py                  # Data source configuration\n\u251c\u2500\u2500 firecrawl_utils.py         # Firecrawl manager\n\u251c\u2500\u2500 crawl_municipal_docs.py    # Main crawler script\n\u251c\u2500\u2500 download_pdfs.py           # PDF downloader\n\u251c\u2500\u2500 extract_pdf_urls.py        # URL extraction\n\u2514\u2500\u2500 extract_text_from_pdfs.py  # OCR/text extraction\n\next_data/                      # Crawled documents\n\u251c\u2500\u2500 mairie_arretes/            # ~4010 arr\xeat\xe9s\n\u251c\u2500\u2500 mairie_deliberations/      # Council deliberations\n\u2514\u2500\u2500 commission_controle/       # Commission documents\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.h3,{id:"1-environment-setup",children:"1. Environment Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install dependencies\npoetry install\n\n# Configure environment\ncp .env.example .env\n# Edit .env with your API keys:\n# - FIRECRAWL_API_KEY\n# - GEMINI_API_KEY (or other LLM)\n# - OPIK_API_KEY (optional, for tracing)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-run-the-application",children:"2. Run the Application"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start Streamlit UI (port 8502)\n./scripts/run_streamlit.sh\n\n# Or manually:\npoetry run streamlit run app/front.py --server.port 8502\n\n# Start FastAPI (port 8050) - optional\npoetry run uvicorn app.main:app --reload --port 8050\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-run-document-crawlers",children:"3. Run Document Crawlers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Dry run (preview)\npoetry run python src/crawl_municipal_docs.py --dry-run\n\n# Scrape single page (test)\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode scrape\n\n# Full crawl\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode crawl --max-pages 100\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"document-crawling-firecrawl",children:"Document Crawling (Firecrawl)"}),"\n",(0,s.jsx)(n.h3,{id:"data-sources",children:"Data Sources"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Source"}),(0,s.jsx)(n.th,{children:"URL"}),(0,s.jsx)(n.th,{children:"Documents"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"mairie_arretes"})}),(0,s.jsx)(n.td,{children:"audierne.bzh/publications-arretes/"}),(0,s.jsx)(n.td,{children:"~4010"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"mairie_deliberations"})}),(0,s.jsx)(n.td,{children:"audierne.bzh/deliberations-conseil-municipal/"}),(0,s.jsx)(n.td,{children:"~3965"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"commission_controle"})}),(0,s.jsx)(n.td,{children:"audierne.bzh/systeme/documentheque/?documents_category=49"}),(0,s.jsx)(n.td,{children:"Variable"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"commands",children:"Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test API connection\npoetry run python examples/simple_scrape.py\n\n# Explore structure (single page)\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode scrape\n\n# Limited crawl (validate)\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode crawl --max-pages 10\n\n# Full crawl (production)\npoetry run python src/crawl_municipal_docs.py --source all --mode crawl --max-pages 500\n"})}),"\n",(0,s.jsx)(n.h3,{id:"output-structure",children:"Output Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ext_data/<source>/\n\u251c\u2500\u2500 *.md                        # Markdown content\n\u251c\u2500\u2500 *.html                      # HTML content\n\u251c\u2500\u2500 *_metadata.json             # Page metadata\n\u251c\u2500\u2500 index_<timestamp>.md        # Crawl index\n\u251c\u2500\u2500 crawl_metadata_<timestamp>.json\n\u2514\u2500\u2500 errors.log\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pdf-processing",children:"PDF Processing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Download PDFs from crawled metadata\npoetry run python src/download_pdfs.py\n\n# Extract text from PDFs\npoetry run python src/extract_text_from_pdfs.py\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"opik-integration-dual-tracing",children:"Opik Integration (Dual Tracing)"}),"\n",(0,s.jsxs)(n.p,{children:["OCapistaine uses ",(0,s.jsx)(n.strong,{children:"dual Opik tracing"})," for complete observability:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        OPIK DUAL TRACING                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502   OCapistaine App       \u2502       \u2502   Vaettir (N8N Workflows)       \u2502  \u2502\n\u2502  \u2502   (Python Tracing)      \u2502       \u2502   (Workflow Tracing)            \u2502  \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n\u2502  \u2502 \u2022 Forseti agent calls   \u2502       \u2502 \u2022 Facebook integrations         \u2502  \u2502\n\u2502  \u2502 \u2022 LLM provider requests \u2502       \u2502 \u2022 Email processing              \u2502  \u2502\n\u2502  \u2502 \u2022 Mockup validation     \u2502       \u2502 \u2022 Chatbot workflows             \u2502  \u2502\n\u2502  \u2502 \u2022 Charter evaluation    \u2502       \u2502 \u2022 Cross-channel orchestration   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502              \u2502                                     \u2502                     \u2502\n\u2502              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2502\n\u2502                             \u25bc                                            \u2502\n\u2502              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \u2502\n\u2502              \u2502   Comet ML / Opik Dashboard \u2502                             \u2502\n\u2502              \u2502   (ocapistaine-dev workspace)\u2502                             \u2502\n\u2502              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                             \u2502\n\u2502                                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h3,{id:"why-dual-tracing",children:"Why Dual Tracing?"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Source"}),(0,s.jsx)(n.th,{children:"What It Traces"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"App (Python)"})}),(0,s.jsx)(n.td,{children:"Agent logic, LLM calls, validation"}),(0,s.jsx)(n.td,{children:"Debug prompt performance, measure accuracy"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Vaettir (N8N)"})}),(0,s.jsx)(n.td,{children:"Multi-channel workflows, integrations"}),(0,s.jsx)(n.td,{children:"Track citizen journey, FB\u2192Agent\u2192Response"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Both feed into the ",(0,s.jsx)(n.strong,{children:"same Opik workspace"})," (",(0,s.jsx)(n.code,{children:"ocapistaine-dev"}),") for unified observability."]}),"\n",(0,s.jsx)(n.h3,{id:"app-side-configuration",children:"App-Side Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# .env\nOPIK_API_KEY=your_comet_api_key\nOPIK_WORKSPACE=ocapistaine-dev\n"})}),"\n",(0,s.jsx)(n.h3,{id:"app-side-usage",children:"App-Side Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from app.agents.tracing.opik import OpikTracer\n\n# Automatic tracing via decorator\n@OpikTracer.track\ndef process_contribution(text: str):\n    # Your logic here\n    pass\n\n# Or with spans for detailed tracing\nwith OpikTracer.span("charter_validation") as span:\n    result = forseti.validate(contribution)\n    span.log_output({"valid": result.is_valid})\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location:"})," ",(0,s.jsx)(n.code,{children:"app/agents/tracing/opik.py"})]}),"\n",(0,s.jsx)(n.h3,{id:"vaettir-side-integration",children:"Vaettir-Side Integration"}),"\n",(0,s.jsx)(n.p,{children:"Vaettir (N8N) has its own Opik integration for workflow tracing:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Repo:"})," github.com/locki-io/vaettir"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Traces:"})," FB messages, email, chatbot interactions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Correlation:"})," Workflow ID links to app traces"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"unified-dashboard",children:"Unified Dashboard"}),"\n",(0,s.jsxs)(n.p,{children:["Access all traces at: ",(0,s.jsx)(n.strong,{children:"comet.com \u2192 ocapistaine-dev workspace"})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"View"}),(0,s.jsx)(n.th,{children:"Shows"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Traces"}),(0,s.jsx)(n.td,{children:"All LLM calls from both sources"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Datasets"}),(0,s.jsx)(n.td,{children:"Exported mockup contributions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Experiments"}),(0,s.jsx)(n.td,{children:"Prompt optimization results"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Metrics"}),(0,s.jsx)(n.td,{children:"Latency, accuracy, cost"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"mockup-testing-system",children:"Mockup Testing System"}),"\n",(0,s.jsx)(n.p,{children:"The mockup system tests Forseti's charter validation with controlled variations."}),"\n",(0,s.jsx)(n.h3,{id:"generate-test-contributions",children:"Generate Test Contributions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from app.mockup.generator import MockContribution, generate_variations\n\n# Create base contribution\nbase = MockContribution(\n    text="Je propose d\'am\xe9liorer l\'\xe9clairage du port",\n    category="environnement",\n    expected_valid=True\n)\n\n# Generate variations\nvariations = generate_variations(base, count=10)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"run-validation-tests",children:"Run Validation Tests"}),"\n",(0,s.jsx)(n.p,{children:'Access via Streamlit UI \u2192 "Mockup" tab, or programmatically:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from app.processors.mockup_processor import MockupProcessor\n\nprocessor = MockupProcessor()\nresults = processor.run_batch_validation(contributions)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"export-to-opik",children:"Export to Opik"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from app.mockup.dataset import export_to_opik\n\nexport_to_opik(contributions, dataset_name="forseti-charter-2026-01-28")\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/fr/docs/app/MOCKUP",children:"MOCKUP.md"})," for detailed documentation."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"internationalization-i18n",children:"Internationalization (i18n)"}),"\n",(0,s.jsx)(n.p,{children:"The UI supports English and French."}),"\n",(0,s.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from app.i18n import get_text, set_language\n\nset_language("fr")  # or "en"\ntext = get_text("welcome_message")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"adding-translations",children:"Adding Translations"}),"\n",(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:"app/translations/{lang}.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "welcome_message": "Bienvenue sur \xd2 Capistaine",\n  "submit_button": "Soumettre"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/fr/docs/app/I18N",children:"I18N.md"})," for details."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"logging-system",children:"Logging System"}),"\n",(0,s.jsx)(n.p,{children:"Domain-based logging with rotation."}),"\n",(0,s.jsx)(n.h3,{id:"domains",children:"Domains"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Domain"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"presentation"})}),(0,s.jsx)(n.td,{children:"UI events"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"services"})}),(0,s.jsx)(n.td,{children:"Business logic"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"agents"})}),(0,s.jsx)(n.td,{children:"AI agent activity"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"processors"})}),(0,s.jsx)(n.td,{children:"Data processing"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"providers"})}),(0,s.jsx)(n.td,{children:"LLM API calls"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"adapters"})}),(0,s.jsx)(n.td,{children:"External integrations"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"data"})}),(0,s.jsx)(n.td,{children:"Data access"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"usage-1",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from app.logging import get_logger\n\nlogger = get_logger("agents")\nlogger.info("Forseti validation started", extra={"contribution_id": "123"})\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/fr/docs/app/LOGGING",children:"LOGGING.md"})," for details."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Required\nFIRECRAWL_API_KEY=your_key          # Document crawling\n\n# LLM Providers (at least one)\nGEMINI_API_KEY=your_key\nMISTRAL_API_KEY=your_key\nOPENAI_API_KEY=your_key\n\n# Optional\nOPIK_API_KEY=your_key               # Tracing (or use Vaettir)\nOPIK_WORKSPACE=ocapistaine-dev\nREDIS_HOST=localhost\nREDIS_PORT=6379\nREDIS_DB=5\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"running-in-production",children:"Running in Production"}),"\n",(0,s.jsx)(n.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'version: "3.8"\nservices:\n  streamlit:\n    build: .\n    ports:\n      - "8502:8502"\n    environment:\n      - REDIS_HOST=redis\n    depends_on:\n      - redis\n\n  redis:\n    image: redis:7\n    ports:\n      - "6379:6379"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ngrok-demohackathon",children:"ngrok (Demo/Hackathon)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start ngrok tunnel\n./scripts/start_ngrok.py\n\n# Access at: ocapistaine.ngrok.app\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"license-split",children:"License Split"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"License"}),(0,s.jsx)(n.th,{children:"Prize Eligible"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/providers/"})}),(0,s.jsx)(n.td,{children:"Apache 2.0"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/logging/"})}),(0,s.jsx)(n.td,{children:"Apache 2.0"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/mockup/"})}),(0,s.jsx)(n.td,{children:"Apache 2.0"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/processors/"})}),(0,s.jsx)(n.td,{children:"Apache 2.0"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/i18n.py"})}),(0,s.jsx)(n.td,{children:"Apache 2.0"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"src/"})," (crawlers)"]}),(0,s.jsx)(n.td,{children:"Apache 2.0"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/agents/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ELv2"})}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/agents/forseti/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ELv2"})}),(0,s.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"See the COLLABORATION_ADDENDUM.md file in the repository root for hackathon prize distribution rules."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Document"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/FORSETI_AGENT",children:"FORSETI_AGENT.md"})}),(0,s.jsx)(n.td,{children:"Forseti agent features and adding new features"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/PROMPT_MANAGEMENT",children:"PROMPT_MANAGEMENT.md"})}),(0,s.jsx)(n.td,{children:"Prompt registry and Opik integration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/AUTO_CONTRIBUTIONS",children:"AUTO_CONTRIBUTIONS.md"})}),(0,s.jsx)(n.td,{children:"Auto-contribution workflow"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/MOCKUP",children:"MOCKUP.md"})}),(0,s.jsx)(n.td,{children:"Mockup testing system details"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/LOGGING",children:"LOGGING.md"})}),(0,s.jsx)(n.td,{children:"Logging system guide"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/I18N",children:"I18N.md"})}),(0,s.jsx)(n.td,{children:"Internationalization guide"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/app/STREAMLIT_SETUP",children:"STREAMLIT_SETUP.md"})}),(0,s.jsx)(n.td,{children:"Streamlit configuration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/fr/docs/sovereignty/rag-document-storage",children:"sovereignty/rag-document-storage.md"})}),(0,s.jsx)(n.td,{children:"Data sovereignty & storage architecture"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"firecrawl-issues",children:"Firecrawl Issues"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check API key\necho $FIRECRAWL_API_KEY\n\n# Test connection\npoetry run python examples/simple_scrape.py\n\n# Check errors\ncat ext_data/mairie_arretes/errors.log\n"})}),"\n",(0,s.jsx)(n.h3,{id:"redis-connection",children:"Redis Connection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Verify Redis is running\nredis-cli ping\n\n# Check connection\npoetry run python -c "from app.data.redis_client import get_redis; print(get_redis().ping())"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"streamlit-port-busy",children:"Streamlit Port Busy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Kill existing process\n./scripts/run_streamlit.sh  # Auto-kills port 8502\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"migration-notes",children:"Migration Notes"}),"\n",(0,s.jsxs)(n.h3,{id:"from-src-to-app",children:["From ",(0,s.jsx)(n.code,{children:"src/"})," to ",(0,s.jsx)(n.code,{children:"app/"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"src/"})," directory now contains only ",(0,s.jsx)(n.strong,{children:"crawling utilities"}),". Application code has moved to ",(0,s.jsx)(n.code,{children:"app/"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Old Location"}),(0,s.jsx)(n.th,{children:"New Location"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"src/agents/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/agents/"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"src/services/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/services/"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"src/processors/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"app/processors/"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"src/config.py"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"app/providers/config.py"})," (for app), ",(0,s.jsx)(n.code,{children:"src/config.py"})," (for crawlers)"]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"opik-changes",children:"Opik Changes"}),"\n",(0,s.jsxs)(n.p,{children:["Opik is now primarily used via ",(0,s.jsx)(n.strong,{children:"Vaettir"})," (N8N workflows). Local tracing remains in ",(0,s.jsx)(n.code,{children:"app/agents/tracing/opik.py"})," but is secondary."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Last updated: 2026-01-28"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>c,x:()=>a});var i=r(6540);const s={},t=i.createContext(s);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);