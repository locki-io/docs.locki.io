"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[7925],{4189(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"FIRECRAWL_GUIDE","title":"Firecrawl Methodology Guide","description":"This guide explains how to use the Firecrawl infrastructure to collect and organize municipal documents from the Audierne website.","source":"@site/docs/FIRECRAWL_GUIDE.md","sourceDirName":".","slug":"/FIRECRAWL_GUIDE","permalink":"/fr/docs/FIRECRAWL_GUIDE","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/FIRECRAWL_GUIDE.md","tags":[],"version":"current","frontMatter":{}}');var i=r(4848),l=r(8453);const c={},t="Firecrawl Methodology Guide",a={},o=[{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:2},{value:"\ud83d\udccb Data Sources",id:"-data-sources",level:2},{value:"\ud83d\ude80 Getting Started",id:"-getting-started",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation",id:"installation",level:3},{value:"\ud83d\udcd6 Usage",id:"-usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Command-Line Options",id:"command-line-options",level:3},{value:"Examples",id:"examples",level:3},{value:"1. Dry Run (No Actual Crawling)",id:"1-dry-run-no-actual-crawling",level:4},{value:"2. Test Single Source",id:"2-test-single-source",level:4},{value:"3. Full Crawl of All Sources",id:"3-full-crawl-of-all-sources",level:4},{value:"\ud83d\udcc2 Output Structure",id:"-output-structure",level:2},{value:"\ud83d\udd27 Customization",id:"-customization",level:2},{value:"Adding New Data Sources",id:"adding-new-data-sources",level:3},{value:"Adjusting Firecrawl Settings",id:"adjusting-firecrawl-settings",level:3},{value:"Document Extraction Logic",id:"document-extraction-logic",level:3},{value:"\ud83d\udcca Monitoring Progress",id:"-monitoring-progress",level:2},{value:"\ud83d\udd04 Recommended Workflow",id:"-recommended-workflow",level:2},{value:"Phase 1: Exploration (Scrape Mode)",id:"phase-1-exploration-scrape-mode",level:3},{value:"Phase 2: Limited Crawl (Testing)",id:"phase-2-limited-crawl-testing",level:3},{value:"Phase 3: Full Crawl",id:"phase-3-full-crawl",level:3},{value:"Phase 4: OCR Processing",id:"phase-4-ocr-processing",level:3},{value:"\ud83d\udee1\ufe0f Error Handling",id:"\ufe0f-error-handling",level:2},{value:"\ud83d\udca1 Tips",id:"-tips",level:2},{value:"\ud83d\udd2e Next Steps",id:"-next-steps",level:2},{value:"\ud83d\udcde Support",id:"-support",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"firecrawl-methodology-guide",children:"Firecrawl Methodology Guide"})}),"\n",(0,i.jsx)(n.p,{children:"This guide explains how to use the Firecrawl infrastructure to collect and organize municipal documents from the Audierne website."}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 __init__.py                  # Package initialization\n\u251c\u2500\u2500 config.py                    # Data source configuration\n\u251c\u2500\u2500 firecrawl_utils.py          # Firecrawl manager and utilities\n\u2514\u2500\u2500 crawl_municipal_docs.py     # Main orchestration script\n\next_data/\n\u251c\u2500\u2500 README.md                    # Data sources documentation\n\u251c\u2500\u2500 mairie_arretes/             # Output: arr\xeat\xe9s & publications\n\u251c\u2500\u2500 mairie_deliberations/       # Output: d\xe9lib\xe9rations\n\u2514\u2500\u2500 commission_controle/        # Output: commission documents\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-data-sources",children:"\ud83d\udccb Data Sources"}),"\n",(0,i.jsxs)(n.p,{children:["As defined in ",(0,i.jsx)(n.code,{children:"ext_data/README.md"}),", we have three main sources:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Mairie: Arr\xeat\xe9s"})," (4010 documents)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["URL: ",(0,i.jsx)(n.a,{href:"https://www.audierne.bzh/publications-arretes/",children:"https://www.audierne.bzh/publications-arretes/"})]}),"\n",(0,i.jsx)(n.li,{children:"Method: Firecrawl + OCR"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Mairie: D\xe9lib\xe9rations"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["URL: ",(0,i.jsx)(n.a,{href:"https://www.audierne.bzh/deliberations-conseil-municipal/",children:"https://www.audierne.bzh/deliberations-conseil-municipal/"})]}),"\n",(0,i.jsx)(n.li,{children:"Method: Firecrawl + OCR"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Commission de Contr\xf4le"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["URL: ",(0,i.jsx)(n.a,{href:"https://www.audierne.bzh/systeme/documentheque/?documents_category=49",children:"https://www.audierne.bzh/systeme/documentheque/?documents_category=49"})]}),"\n",(0,i.jsx)(n.li,{children:"Method: Firecrawl + OCR"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-getting-started",children:"\ud83d\ude80 Getting Started"}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API Key"}),": Get a Firecrawl API key from ",(0,i.jsx)(n.a,{href:"https://firecrawl.dev",children:"https://firecrawl.dev"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment Setup"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export FIRECRAWL_API_KEY="your_api_key_here"\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["Dependencies are already configured in ",(0,i.jsx)(n.code,{children:"pyproject.toml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry install\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-usage",children:"\ud83d\udcd6 Usage"}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Scrape a single page (exploratory mode)\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode scrape\n\n# Crawl full website section (up to 100 pages)\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode crawl --max-pages 100\n\n# Process all sources\npoetry run python src/crawl_municipal_docs.py --source all --mode scrape\n"})}),"\n",(0,i.jsx)(n.h3,{id:"command-line-options",children:"Command-Line Options"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"--source <name>      Which source to process: mairie_arretes, mairie_deliberations,\n                     commission_controle, or all (default: all)\n\n--mode <mode>        scrape = single page only (for testing structure)\n                     crawl = full website crawl (default: scrape)\n\n--max-pages <n>      Maximum pages to crawl (default: 100, only for crawl mode)\n\n--api-key <key>      Firecrawl API key (alternative to env var)\n\n--dry-run            Show what would be done without actually crawling\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h4,{id:"1-dry-run-no-actual-crawling",children:"1. Dry Run (No Actual Crawling)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry run python src/crawl_municipal_docs.py --source all --dry-run\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-test-single-source",children:"2. Test Single Source"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# First, scrape just the main page to understand structure\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode scrape\n\n# Then crawl the full section\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode crawl --max-pages 50\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-full-crawl-of-all-sources",children:"3. Full Crawl of All Sources"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry run python src/crawl_municipal_docs.py --source all --mode crawl --max-pages 200\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-output-structure",children:"\ud83d\udcc2 Output Structure"}),"\n",(0,i.jsx)(n.p,{children:"For each data source, the script creates:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ext_data/<source_name>/\n\u251c\u2500\u2500 <page1>.md                    # Markdown content\n\u251c\u2500\u2500 <page1>.html                  # HTML content\n\u251c\u2500\u2500 <page1>_metadata.json         # Full metadata\n\u251c\u2500\u2500 <page2>.md\n\u251c\u2500\u2500 <page2>.html\n\u251c\u2500\u2500 ...\n\u251c\u2500\u2500 index_<timestamp>.md          # Index of all crawled pages\n\u251c\u2500\u2500 crawl_metadata_<timestamp>.json  # Complete crawl metadata\n\u2514\u2500\u2500 errors.log                    # Error log (if any)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-customization",children:"\ud83d\udd27 Customization"}),"\n",(0,i.jsx)(n.h3,{id:"adding-new-data-sources",children:"Adding New Data Sources"}),"\n",(0,i.jsxs)(n.p,{children:["Edit ",(0,i.jsx)(n.code,{children:"src/config.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'DATA_SOURCES.append(\n    DataSource(\n        name="new_source",\n        url="https://example.com/page",\n        method="firecrawl+ocr",\n        output_dir=EXT_DATA_DIR / "new_source",\n        description="Description of the source",\n        expected_count=100,  # Optional\n    )\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"adjusting-firecrawl-settings",children:"Adjusting Firecrawl Settings"}),"\n",(0,i.jsxs)(n.p,{children:["Edit ",(0,i.jsx)(n.code,{children:"src/config.py"})," to modify ",(0,i.jsx)(n.code,{children:"FIRECRAWL_CONFIG"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'FIRECRAWL_CONFIG = {\n    "formats": ["markdown", "html"],\n    "onlyMainContent": True,\n    "includeTags": ["article", "main", "div.content"],\n    "excludeTags": ["nav", "footer", "header"],\n    "waitFor": 2000,  # Milliseconds to wait for dynamic content\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"document-extraction-logic",children:"Document Extraction Logic"}),"\n",(0,i.jsxs)(n.p,{children:["The function ",(0,i.jsx)(n.code,{children:"extract_documents_from_page()"})," in ",(0,i.jsx)(n.code,{children:"src/firecrawl_utils.py"})," is a placeholder for custom extraction logic specific to the Audierne website structure."]}),"\n",(0,i.jsx)(n.p,{children:"After scraping initial pages, you can:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Examine the markdown/HTML output"}),"\n",(0,i.jsx)(n.li,{children:"Identify patterns for document links, titles, dates"}),"\n",(0,i.jsx)(n.li,{children:"Implement extraction logic in this function"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-monitoring-progress",children:"\ud83d\udcca Monitoring Progress"}),"\n",(0,i.jsx)(n.p,{children:"The script provides real-time feedback:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\ud83d\udd25 Scraping: https://...\n\u2705 Successfully scraped: https://...\n\n\ud83d\udcca SUMMARY\n  \u2705 SUCCESS: mairie_arretes\n  \u2705 SUCCESS: mairie_deliberations\n  Total: 2 | Success: 2 | Failed: 0\n"})}),"\n",(0,i.jsx)(n.p,{children:"Check output directories for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"index_*.md"})," files for page lists"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"errors.log"})," for any failures"]}),"\n",(0,i.jsxs)(n.li,{children:["Individual ",(0,i.jsx)(n.code,{children:".md"})," files for content"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-recommended-workflow",children:"\ud83d\udd04 Recommended Workflow"}),"\n",(0,i.jsx)(n.h3,{id:"phase-1-exploration-scrape-mode",children:"Phase 1: Exploration (Scrape Mode)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Test each source individually\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode scrape\npoetry run python src/crawl_municipal_docs.py --source mairie_deliberations --mode scrape\npoetry run python src/crawl_municipal_docs.py --source commission_controle --mode scrape\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Review outputs to understand:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Page structure"}),"\n",(0,i.jsx)(n.li,{children:"Document link patterns"}),"\n",(0,i.jsx)(n.li,{children:"Pagination approach"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"phase-2-limited-crawl-testing",children:"Phase 2: Limited Crawl (Testing)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Crawl a small number of pages to validate\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode crawl --max-pages 10\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verify:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All pages are captured"}),"\n",(0,i.jsx)(n.li,{children:"Content quality is good"}),"\n",(0,i.jsx)(n.li,{children:"No errors in logs"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"phase-3-full-crawl",children:"Phase 3: Full Crawl"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Crawl complete sections (adjust max-pages based on expected count)\npoetry run python src/crawl_municipal_docs.py --source mairie_arretes --mode crawl --max-pages 500\n"})}),"\n",(0,i.jsx)(n.h3,{id:"phase-4-ocr-processing",children:"Phase 4: OCR Processing"}),"\n",(0,i.jsx)(n.p,{children:"After Firecrawl completes, process downloaded PDFs with OCR:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Identify PDF files in scraped content"}),"\n",(0,i.jsxs)(n.li,{children:["Apply OCR (configuration in ",(0,i.jsx)(n.code,{children:"src/config.py"})," \u2192 ",(0,i.jsx)(n.code,{children:"OCR_CONFIG"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Extract text from images/scanned documents"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-error-handling",children:"\ud83d\udee1\ufe0f Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"The script includes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Try-catch blocks"})," for each source"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error logging"})," to ",(0,i.jsx)(n.code,{children:"errors.log"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Graceful failure"})," (continues with next source if one fails)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Summary report"})," showing success/failure status"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-tips",children:"\ud83d\udca1 Tips"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Start Small"}),": Always test with ",(0,i.jsx)(n.code,{children:"--mode scrape"})," first"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rate Limiting"}),": Be respectful of the municipal website"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API Costs"}),": Firecrawl has usage limits; monitor your quota"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Incremental"}),": Process sources one at a time before running ",(0,i.jsx)(n.code,{children:"--source all"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backup"}),": The script preserves original HTML + metadata for reference"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-next-steps",children:"\ud83d\udd2e Next Steps"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Implement OCR"}),": Add OCR processing for PDF documents"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Custom Extraction"}),": Implement ",(0,i.jsx)(n.code,{children:"extract_documents_from_page()"})," logic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database Storage"}),": Store structured data in a database"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Scheduling"}),": Set up automated periodic crawls"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Analysis"}),": Build tools to analyze collected documents"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-support",children:"\ud83d\udcde Support"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Firecrawl Documentation: ",(0,i.jsx)(n.a,{href:"https://docs.firecrawl.dev",children:"https://docs.firecrawl.dev"})]}),"\n",(0,i.jsx)(n.li,{children:"Project Issues: See main README.md"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>c,x:()=>t});var s=r(6540);const i={},l=s.createContext(i);function c(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);