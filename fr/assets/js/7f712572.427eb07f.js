"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[2044],{2093(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"app/STREAMLIT_QUICKSTART","title":"Streamlit Quick Start - Fix 403 WebSocket Error","description":"Quick fix for \\"You need to enable JavaScript\\" and 403 WebSocket errors.","source":"@site/docs/app/STREAMLIT_QUICKSTART.md","sourceDirName":"app","slug":"/app/STREAMLIT_QUICKSTART","permalink":"/fr/docs/app/STREAMLIT_QUICKSTART","draft":false,"unlisted":false,"editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/docs/app/STREAMLIT_QUICKSTART.md","tags":[],"version":"current","frontMatter":{},"sidebar":"appSidebar","previous":{"title":"Streamlit Application Setup","permalink":"/fr/docs/app/STREAMLIT_SETUP"},"next":{"title":"CORS Strategy for OCapistaine","permalink":"/fr/docs/app/CORS_STRATEGY"}}');var i=r(4848),o=r(8453);const s={},l="Streamlit Quick Start - Fix 403 WebSocket Error",c={},a=[{value:"The Problem",id:"the-problem",level:2},{value:"Quick Fix",id:"quick-fix",level:2},{value:"Production (Render)",id:"production-render",level:3},{value:"Development (ngrok)",id:"development-ngrok",level:3},{value:"Verify It Works",id:"verify-it-works",level:2},{value:"If Still Not Working",id:"if-still-not-working",level:2},{value:"Common Issues",id:"common-issues",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"streamlit-quick-start---fix-403-websocket-error",children:"Streamlit Quick Start - Fix 403 WebSocket Error"})}),"\n",(0,i.jsx)(n.p,{children:'Quick fix for "You need to enable JavaScript" and 403 WebSocket errors.'}),"\n",(0,i.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsx)(n.p,{children:"Your Streamlit app loads but doesn't work because:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["WebSocket connections (",(0,i.jsx)(n.code,{children:"/_stcore/stream"}),") return 403 Forbidden"]}),"\n",(0,i.jsx)(n.li,{children:"Streamlit is blocking connections from the proxy domain"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-fix",children:"Quick Fix"}),"\n",(0,i.jsx)(n.h3,{id:"production-render",children:"Production (Render)"}),"\n",(0,i.jsxs)(n.p,{children:["Check that ",(0,i.jsx)(n.code,{children:"render.yaml"})," includes the proxy domain in ",(0,i.jsx)(n.code,{children:"STREAMLIT_SERVER_ALLOWED_ORIGINS"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'- key: STREAMLIT_SERVER_ALLOWED_ORIGINS\n  value: "https://ocapistaine.onrender.com,https://ocapistaine.vaettir.locki.io,https://vaettir.locki.io"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Redeploy after changes."}),"\n",(0,i.jsx)(n.h3,{id:"development-ngrok",children:"Development (ngrok)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. Set up CORS\neval $(python scripts/set_streamlit_env.py)\n\n# 2. Start Streamlit\nstreamlit run app/front.py\n\n# 3. In another terminal, start ngrok\nngrok http 8502 --domain=$NGROK_DOMAIN\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Access via ",(0,i.jsx)(n.code,{children:"https://ocapistaine-dev.vaettir.locki.io"})]}),"\n",(0,i.jsx)(n.h2,{id:"verify-it-works",children:"Verify It Works"}),"\n",(0,i.jsx)(n.p,{children:"Open browser DevTools (F12) \u2192 Network tab:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Look for ",(0,i.jsx)(n.code,{children:"/_stcore/stream"})," WebSocket"]}),"\n",(0,i.jsxs)(n.li,{children:["Should show status ",(0,i.jsx)(n.code,{children:"101 Switching Protocols"})]}),"\n",(0,i.jsxs)(n.li,{children:["NOT ",(0,i.jsx)(n.code,{children:"403 Forbidden"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"if-still-not-working",children:"If Still Not Working"}),"\n",(0,i.jsxs)(n.p,{children:["See full troubleshooting guide: ",(0,i.jsx)(n.a,{href:"/fr/docs/app/STREAMLIT_SETUP",children:"STREAMLIT_SETUP.md"})]}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Still 403?"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check what origins are configured\necho $STREAMLIT_SERVER_ALLOWED_ORIGINS\n\n# Try wildcard (dev only)\nexport STREAMLIT_SERVER_ALLOWED_ORIGINS="*"\nstreamlit run app/front.py\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"App not responding?"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check health\ncurl http://localhost:8502/_stcore/health\n\n# Production\ncurl https://ocapistaine.vaettir.locki.io/_stcore/health\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Render cold start?"})}),"\n",(0,i.jsx)(n.p,{children:"Standard plan instances may take 30-60s to wake up. Wait and retry."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>l});var t=r(6540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);