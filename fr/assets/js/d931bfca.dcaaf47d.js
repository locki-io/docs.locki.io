"use strict";(globalThis.webpackChunkdocs_locki_io=globalThis.webpackChunkdocs_locki_io||[]).push([[8402],{1820(e,i,t){t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>a});var n=t(4465),r=t(4848),s=t(8453);const o={slug:"forseti-prompt-architecture",title:"Forseti461 Feature Architecture: Modular Prompts with Opik Versioning",authors:["jnxmas"],tags:["encode","ai-ml","civictech","observability","opik","architecture"]},c=void 0,l={authorsImageUrls:[void 0]},a=[{value:"The Challenge",id:"the-challenge",level:2},{value:"The Solution: Feature-Based Prompt Architecture",id:"the-solution-feature-based-prompt-architecture",level:2},{value:"What We Built Today",id:"what-we-built-today",level:2},{value:"1. Centralized Prompt Registry",id:"1-centralized-prompt-registry",level:3},{value:"2. Consistent Opik Naming Convention",id:"2-consistent-opik-naming-convention",level:3},{value:"3. Feature Documentation",id:"3-feature-documentation",level:3},{value:"4. Batch Validation as Experiments",id:"4-batch-validation-as-experiments",level:3},{value:"File Structure",id:"file-structure",level:2},{value:"Syncing Prompts to Opik",id:"syncing-prompts-to-opik",level:2},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Independent Optimization",id:"independent-optimization",level:3},{value:"Version Tracking",id:"version-tracking",level:3},{value:"Vaettir MCP Integration (Future)",id:"vaettir-mcp-integration-future",level:3},{value:"What&#39;s Next",id:"whats-next",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const i={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.p,{children:["Today we completed a major architectural milestone: ",(0,r.jsx)(i.strong,{children:"modular prompt management"})," for Forseti461. Each feature now has its own versioned prompt in Opik, enabling independent optimization and A/B testing."]}),"\n",(0,r.jsx)(i.admonition,{type:"tip",children:(0,r.jsx)(i.p,{children:"From a single monolithic prompt to a clean separation of concerns \u2014 each Forseti feature can now evolve independently while sharing a common persona."})}),"\n",(0,r.jsx)(i.h2,{id:"the-challenge",children:"The Challenge"}),"\n",(0,r.jsx)(i.p,{children:"Our previous setup had prompts scattered across multiple files:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"app/agents/forseti/prompts.py"})," \u2014 Python templates"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"app/processors/workflows/workflow_autocontribution.py"})," \u2014 Duplicate prompts"]}),"\n",(0,r.jsxs)(i.li,{children:["Manual prompts in Opik (with a typo: ",(0,r.jsx)(i.code,{children:"foreseti461"}),")"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"This made it hard to:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Track which prompt version was deployed"}),"\n",(0,r.jsx)(i.li,{children:"Run A/B tests on specific features"}),"\n",(0,r.jsx)(i.li,{children:"Optimize one feature without affecting others"}),"\n",(0,r.jsx)(i.li,{children:"Share prompts with N8N workflows (via Vaettir MCP)"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"the-solution-feature-based-prompt-architecture",children:"The Solution: Feature-Based Prompt Architecture"}),"\n",(0,r.jsxs)(i.p,{children:["We reorganized Forseti into ",(0,r.jsx)(i.strong,{children:"4 distinct features"}),", each with its own prompt:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    FORSETI 461 PROMPT ARCHITECTURE                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  SHARED SYSTEM PROMPT (Persona)                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  forseti461-system-persona                                      \u2502 \u2502\n\u2502  \u2502  "You are Forseti, a vigilant assistant..."                     \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                              \u2502                                       \u2502\n\u2502              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                      \u2502\n\u2502              \u25bc               \u25bc               \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 CHARTER          \u2502 \u2502 CATEGORY         \u2502 \u2502 WORDING          \u2502    \u2502\n\u2502  \u2502 VALIDATION       \u2502 \u2502 CLASSIFICATION   \u2502 \u2502 CORRECTION       \u2502    \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u2502\n\u2502  \u2502 forseti461-user- \u2502 \u2502 forseti461-user- \u2502 \u2502 forseti461-user- \u2502    \u2502\n\u2502  \u2502 charter-validation\u2502 \u2502 category-        \u2502 \u2502 wording-         \u2502    \u2502\n\u2502  \u2502                  \u2502 \u2502 classification   \u2502 \u2502 correction       \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,r.jsx)(i.h2,{id:"what-we-built-today",children:"What We Built Today"}),"\n",(0,r.jsx)(i.h3,{id:"1-centralized-prompt-registry",children:"1. Centralized Prompt Registry"}),"\n",(0,r.jsxs)(i.p,{children:["All prompts now live in ",(0,r.jsx)(i.code,{children:"app/prompts/"})," with a unified registry:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:'from app.prompts import get_registry\n\nregistry = get_registry()\n\n# Get formatted messages for LLM chat API\nmessages = registry.get_messages(\n    "forseti.charter_validation",\n    title="Ma proposition",\n    body="Je propose d\'am\xe9liorer..."\n)\n'})}),"\n",(0,r.jsx)(i.p,{children:"The registry supports:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"JSON chat format"})," (Opik-compatible with Mustache ",(0,r.jsx)(i.code,{children:"{{input.var}}"})," syntax)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Python text format"})," (legacy fallback with ",(0,r.jsx)(i.code,{children:"{var}"})," syntax)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Automatic fallback chain"}),": Local JSON \u2192 Local Python \u2192 Opik remote"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"2-consistent-opik-naming-convention",children:"2. Consistent Opik Naming Convention"}),"\n",(0,r.jsxs)(i.p,{children:["We standardized all prompt names following ",(0,r.jsx)(i.strong,{children:"Option B"})," (descriptive without dates):"]}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Local Name"}),(0,r.jsx)(i.th,{children:"Opik Name"}),(0,r.jsx)(i.th,{children:"Commit"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti.persona"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti461-system-persona"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"f73d1f4a"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti.charter_validation"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti461-user-charter-validation"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"4b187053"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti.category_classification"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti461-user-category-classification"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"efd48155"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti.wording_correction"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti461-user-wording-correction"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"f2bbedd1"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti.batch_validation"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"forseti461-user-batch-validation"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"0e097ebb"})})]})]})]}),"\n",(0,r.jsxs)(i.p,{children:["Naming pattern: ",(0,r.jsx)(i.code,{children:"forseti461-{role}-{feature}"})]}),"\n",(0,r.jsx)(i.h3,{id:"3-feature-documentation",children:"3. Feature Documentation"}),"\n",(0,r.jsxs)(i.p,{children:["Created comprehensive ",(0,r.jsx)(i.code,{children:"FORSETI_AGENT.md"})," with a ",(0,r.jsx)(i.strong,{children:"7-step procedure"})," to add new features:"]}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Define prompt in ",(0,r.jsx)(i.code,{children:"app/prompts/local/forseti.py"})]}),"\n",(0,r.jsxs)(i.li,{children:["Create result model in ",(0,r.jsx)(i.code,{children:"app/agents/forseti/models.py"})]}),"\n",(0,r.jsxs)(i.li,{children:["Implement feature class in ",(0,r.jsx)(i.code,{children:"app/agents/forseti/features/"})]}),"\n",(0,r.jsxs)(i.li,{children:["Register in ",(0,r.jsx)(i.code,{children:"features/__init__.py"})," and ",(0,r.jsx)(i.code,{children:"agent.py"})]}),"\n",(0,r.jsxs)(i.li,{children:["Add to ",(0,r.jsx)(i.code,{children:"forseti_charter.json"})," for Opik sync"]}),"\n",(0,r.jsx)(i.li,{children:"Write tests"}),"\n",(0,r.jsx)(i.li,{children:"Optimize with Opik (optional)"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"4-batch-validation-as-experiments",children:"4. Batch Validation as Experiments"}),"\n",(0,r.jsxs)(i.p,{children:["We decided ",(0,r.jsx)(i.strong,{children:"not"})," to make batch validation a feature class. Instead, it's handled as ",(0,r.jsx)(i.strong,{children:"Opik experiments"})," \u2014 allowing us to:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Track metrics across validation runs"}),"\n",(0,r.jsx)(i.li,{children:"Compare performance over time"}),"\n",(0,r.jsx)(i.li,{children:"A/B test different prompt versions on the same dataset"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"file-structure",children:"File Structure"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"app/prompts/\n\u251c\u2500\u2500 __init__.py              # Exports: get_registry, CATEGORIES\n\u251c\u2500\u2500 registry.py              # PromptRegistry with chat format support\n\u251c\u2500\u2500 constants.py             # CATEGORIES, CATEGORY_DESCRIPTIONS\n\u251c\u2500\u2500 opik_sync.py             # CLI: python -m app.prompts.opik_sync\n\u251c\u2500\u2500 optimizer.py             # Prompt optimization with opik-optimizer\n\u2514\u2500\u2500 local/\n    \u251c\u2500\u2500 forseti_charter.json # Opik-synced prompts (chat format)\n    \u251c\u2500\u2500 forseti.py           # Python prompts (fallback)\n    \u2514\u2500\u2500 autocontrib.py       # Auto-contribution prompts\n"})}),"\n",(0,r.jsx)(i.h2,{id:"syncing-prompts-to-opik",children:"Syncing Prompts to Opik"}),"\n",(0,r.jsx)(i.p,{children:"One command syncs all Forseti prompts:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"python -m app.prompts.opik_sync --prefix forseti.\n\n# Output:\n# \u2705 forseti.persona (commit: f73d1f4a)\n# \u2705 forseti.charter_validation (commit: 4b187053)\n# \u2705 forseti.category_classification (commit: efd48155)\n# \u2705 forseti.wording_correction (commit: f2bbedd1)\n# \u2705 forseti.batch_validation (commit: 0e097ebb)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,r.jsx)(i.h3,{id:"independent-optimization",children:"Independent Optimization"}),"\n",(0,r.jsx)(i.p,{children:"Now we can optimize each feature separately:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:'from app.prompts import optimize_forseti_charter\n\n# Optimize just category classification\nresult = optimize_forseti_charter(\n    dataset_name="forseti-category-training",\n    optimizer_type="meta_prompt",\n)\n'})}),"\n",(0,r.jsx)(i.h3,{id:"version-tracking",children:"Version Tracking"}),"\n",(0,r.jsx)(i.p,{children:"Every prompt change is tracked in Opik with a commit hash. We can:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Roll back to previous versions"}),"\n",(0,r.jsx)(i.li,{children:"Compare performance across versions"}),"\n",(0,r.jsx)(i.li,{children:"Link experiments to specific prompt commits"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"vaettir-mcp-integration-future",children:"Vaettir MCP Integration (Future)"}),"\n",(0,r.jsx)(i.p,{children:"With prompts centralized, we're ready for Phase 3:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Share prompts between Python app and N8N workflows"}),"\n",(0,r.jsxs)(i.li,{children:["Access via MCP tools: ",(0,r.jsx)(i.code,{children:'get_prompt("forseti.charter_validation")'})]}),"\n",(0,r.jsx)(i.li,{children:"Single source of truth across all integrations"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Phase 4"}),": Update ",(0,r.jsx)(i.code,{children:"ForsetiAgent"})," to use ",(0,r.jsx)(i.code,{children:"registry.get_messages()"})," for all LLM calls, enabling:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Automatic prompt versioning in traces"}),"\n",(0,r.jsx)(i.li,{children:"Chat format for better model performance"}),"\n",(0,r.jsx)(i.li,{children:"Seamless fallback if Opik is unavailable"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Metric"}),(0,r.jsx)(i.th,{children:"Before"}),(0,r.jsx)(i.th,{children:"After"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Prompt locations"}),(0,r.jsx)(i.td,{children:"3+ files"}),(0,r.jsx)(i.td,{children:"1 registry"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Opik prompts synced"}),(0,r.jsx)(i.td,{children:"2 (with typo)"}),(0,r.jsx)(i.td,{children:"5 (correct naming)"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Feature documentation"}),(0,r.jsx)(i.td,{children:"None"}),(0,r.jsx)(i.td,{children:"7-step procedure"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Tests"}),(0,r.jsx)(i.td,{children:"17 passing"}),(0,r.jsx)(i.td,{children:"17 passing"})]})]})]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Branch:"})," ",(0,r.jsx)(i.code,{children:"experiment/heavy_dowel_6216"})]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Key files:"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"app/prompts/local/forseti_charter.json"})," \u2014 Chat format prompts"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"app/prompts/registry.py"})," \u2014 Unified prompt access"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"docs/docs/app/FORSETI_AGENT.md"})," \u2014 Feature documentation"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"docs/docs/app/PROMPT_MANAGEMENT.md"})," \u2014 Architecture overview"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.em,{children:"Modular prompts, independent optimization, clean architecture."})})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},4465(e){e.exports=JSON.parse('{"permalink":"/fr/blog/forseti-prompt-architecture","editUrl":"https://github.com/locki-io/docs.locki.io/tree/main/blog/2026-01-29-prompt-architecture-forseti-features.md","source":"@site/blog/2026-01-29-prompt-architecture-forseti-features.md","title":"Forseti461 Feature Architecture: Modular Prompts with Opik Versioning","description":"Today we completed a major architectural milestone: modular prompt management for Forseti461. Each feature now has its own versioned prompt in Opik, enabling independent optimization and A/B testing.","date":"2026-01-29T00:00:00.000Z","tags":[{"inline":false,"label":"Encode hackathon","permalink":"/fr/blog/tags/encode","description":"Information from the Encode hackathon"},{"inline":false,"label":"AI and Machine Learning","permalink":"/fr/blog/tags/ai-ml","description":"Articles on AI, machine learning, and related technologies"},{"inline":false,"label":"civitech","permalink":"/fr/blog/tags/civictech","description":"Citizen technologies and open source for the public good"},{"inline":false,"label":"Observability","permalink":"/fr/blog/tags/observability","description":"Articles on observability practices and tools"},{"inline":false,"label":"Opik","permalink":"/fr/blog/tags/opik","description":"Articles on Opik LLM observability and prompt optimization"},{"inline":false,"label":"Architecture","permalink":"/fr/blog/tags/architecture","description":"System architecture, design patterns, and technical structure"}],"readingTime":3.35,"hasTruncateMarker":true,"authors":[{"name":"Jean-No\xebl Schilling","title":"Locki one / french maintainer","url":"https://github.com/jnschilling","socials":{"linkedin":"https://www.linkedin.com/in/jnschilling/","github":"https://github.com/jnschilling","newsletter":"https://www.stratej.fr"},"imageURL":"https://github.com/jnschilling.png","key":"jnxmas","page":null}],"frontMatter":{"slug":"forseti-prompt-architecture","title":"Forseti461 Feature Architecture: Modular Prompts with Opik Versioning","authors":["jnxmas"],"tags":["encode","ai-ml","civictech","observability","opik","architecture"]},"unlisted":false,"prevItem":{"title":"Project Sync: Opik Progress & OCR Blockers","permalink":"/fr/blog/project-sync-opik-ocr"},"nextItem":{"title":"Forseti461 Prompt v1 : Mod\xe9ration IA conforme \xe0 la Charte pour Audierne2026","permalink":"/fr/blog/forseti-first-prompt-optimization"}}')},8453(e,i,t){t.d(i,{R:()=>o,x:()=>c});var n=t(6540);const r={},s=n.createContext(r);function o(e){const i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);